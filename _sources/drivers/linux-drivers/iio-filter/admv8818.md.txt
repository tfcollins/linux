---
wiki-source: https://wiki.analog.com/resources/tools-software/linux-drivers/iio-filter/admv8818
title: ADMV8818: 2 GHz to 18 GHz, Digitally Tunable, High-Pass and Low-Pass Filter
---

ADMV8818 2GHz to 18GHz, Digitally Tunable High-Pass and Low-PASS Filter Linux Driver
====================================================================================

Supported Devices
-----------------

-   [ADMV8818](https://www.google.com/search?q=ADMV8818&btnI=lucky)

Supported Boards
----------------

This driver supports the\

-   [EVAL-ADMV8818](https://www.google.com/search?q=EVAL-ADMV8818&btnI=lucky)

Description
-----------

The ADMV8818-EP is a fully monolithic microwave integrated circuit (MMIC) that features a digitally selectable frequency of operation. The device features four independently controlled high-pass filters (HPFs) and four independently controlled low-pass filters (LPFs) that span the 2 GHz to 18 GHz frequency range.

The flexible architecture of the ADMV8818-EP allows the 3 dB cutoff frequency (f3dB) of the high-pass and low-pass filters to be controlled independently to generate up to 4 GHz of bandwidth. The digital logic control on each filter is 4 bits wide (16 states) and controls the on-chip reactive elements to adjust the f3dB. The typical insertion loss is 9 dB, and the wideband rejection is 35 dB, which is ideally suited for minimizing system harmonics.

This tunable filter can be used as a smaller alternative to large switched filter banks and cavity tuned filters, and this device provides a dynamically adjustable solution in advanced communications applications.

Source Code
===========

Status
------

<table>
<thead>
<tr class="header">
<th>Source</th>
<th>Mainlined?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://www.google.com/search?q=master?drivers/iio/filter/admv8818.c&amp;btnI=lucky">drivers/iio/filter/admv8818.c</a></td>
<td><a href="https://www.google.com/search?q=drivers/iio/filter/admv8818.c&amp;btnI=lucky">YES</a></td>
</tr>
</tbody>
</table>

Files
-----

<table>
<thead>
<tr class="header">
<th>Function</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>driver</td>
<td><a href="https://www.google.com/search?q=master?drivers/iio/filter/admv8818.c&amp;btnI=lucky">drivers/iio/filter/admv8818.c</a></td>
</tr>
<tr class="even">
<td>Documentation</td>
<td><a href="https://www.google.com/search?q=master?Documentation/devicetree/bindings/iio/filter/adi,admv8818.yaml&amp;btnI=lucky">adi,admv8818.yaml</a></td>
</tr>
<tr class="odd">
<td>ABI documentation</td>
<td><a href="https://www.google.com/search?q=master?Documentation/ABI/testing/sysfs-bus-iio-filter-admv8818&amp;btnI=lucky">sysfs-bus-iio-filter-admv8818</a></td>
</tr>
</tbody>
</table>

Example device tree

<table>
<thead>
<tr class="header">
<th>Function</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dts</td>
<td><a href="https://www.google.com/search?q=rpi-5.10.y?arch/arm/boot/dts/overlays/rpi-admv8818-overlay.dts&amp;btnI=lucky">rpi-admv8818-overlay.dts</a></td>
</tr>
</tbody>
</table>

Example platform device initialization
======================================

The ADF4371 driver is a SPI bus driver and can be instantiated via device tree.

**Required properties:**

-   **compatible**: Should always be one of these:
    -   \"adi,admv8818\"
-   **reg**: SPI chip select number.
-   **clocks**: a list of phandle, one for each entry in clock-names.
-   **clock-names**: Must include the following entry: \"rf\_in\"

**Optional properties:**

-   **clock-scales**: The Common Clock Framework max rate is limited by MAX of unsigned long. For ADF4371/ADF4372 devices this is a deficiency. If specified, this property allows arbitrary scales. The first element in the array should be the multiplier and the second element should be the divider.
-   **adi,bw-hz:**: Allows the user to increase the Bandpass Filter (BPF) bandwidth in Hz. Normally when invoked by the clk notifier, the driver sets the HPF cutoff close below the frequency and the LPF cutoff close above the frequency, and thus creating a BPF.

```{=markdown}
```
Example:

    spi {
      #address-cells = <1>;
      #size-cells = <0>;
      admv8818@0 {
        compatible = "adi,admv8818";
        reg = <0>;
        spi-max-frequency = <10000000>;
        clocks = <&admv8818_rfin>;
        clock-scales = <1 5>;
        clock-names = "rf_in";
        adi,bw-hz = /bits/ 64 <600000000>;
      };
    };

```
```
Enabling Linux driver support
=============================

Configure kernel with \"make menuconfig\" (alternatively use \"make xconfig\" or
\"make qconfig\")

:::{NOTE} <!-- ATTRS: round="" help\="" -->

The ADMV8818 driver depends on **SPI** and selects **REGMAP\_SPI**

:::


Adding Linux driver support
===========================

Configure kernel with \"make menuconfig\" (alternatively use \"make xconfig\" or
\"make qconfig\")

```{=markdown}
```
Linux Kernel Configuration
    Device Drivers  --->
    <*>     Industrial I/O support --->
        --- Industrial I/O support
                 Filters --->
                             <*> Analog Devices ADMV8818 High-Pass and Low-Pass Filter

```
```
Hardware configuration
======================

Driver testing
==============

![iio\_snippets\#iio device files&noheader&firstseconly&noeditbtn](/page>software/linux/docs/iio/iio_snippets#iio device files&noheader&firstseconly&noeditbtn)

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
analog:/sys/bus/iio/devices/iio:device0\# **cd /sys/bus/iio/devices/**
root\@analog:/sys/bus/iio/devices\# **ls**
iio:device0
root\@analog:/sys/bus/iio/devices\#

root\@analog:/sys/bus/iio/devices\# **cd iio\\:device0**
root\@analog:/sys/bus/iio/devices/iio:device0\# ls -l
total 0
-r\--r\--r\-- 1 root root 4096 Mar 24 08:38 dev
-r\--r\--r\-- 1 root root 4096 Mar 24 08:38 name
lrwxrwxrwx 1 root root 0 Mar 24 08:38 of\_node -\> ../../../../../../../../firmware/devicetree/base/soc/spi\@7e204000/admv8818\@0
-rw-r\--r\-- 1 root root 4096 Mar 24 08:38 out\_altvoltage0\_filter\_band\_pass\_bandwidth\_3db\_frequency
-rw-r\--r\-- 1 root root 4096 Mar 24 08:38 out\_altvoltage0\_filter\_band\_pass\_center\_frequency
-rw-r\--r\-- 1 root root 4096 Mar 24 08:38 out\_altvoltage0\_filter\_high\_pass\_3db\_frequency
-rw-r\--r\-- 1 root root 4096 Mar 24 08:38 out\_altvoltage0\_filter\_low\_pass\_3db\_frequency
-rw-r\--r\-- 1 root root 4096 Mar 24 08:38 out\_altvoltage0\_mode
-r\--r\--r\-- 1 root root 4096 Mar 24 08:38 out\_altvoltage0\_mode\_available
-rw-r\--r\-- 1 root root 4096 Mar 24 08:38 out\_altvoltage0\_scale
drwxr-xr-x 2 root root 0 Mar 24 08:38 power
lrwxrwxrwx 1 root root 0 Mar 24 08:38 subsystem -\> ../../../../../../../../bus/iio
-rw-r\--r\-- 1 root root 4096 Mar 24 08:38 uevent
root\@analog:/sys/bus/iio/devices/iio:device0\#
```
:::


Show device name
----------------

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat name**
**admv8818**
```
:::


Read channel bandwidth frequency
--------------------------------

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_filter\_band\_pass\_bandwidth\_3db\_frequency**
**750**
```
:::


Set channel bandwidth frequency
-------------------------------

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **echo 500 \> out\_altvoltage0\_filter\_band\_pass\_bandwidth\_3db\_frequency**
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_filter\_band\_pass\_bandwidth\_3db\_frequency**
**734**
```
:::


Read channel center frequency
-----------------------------

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_filter\_band\_pass\_center\_frequency**
**5055**
```
:::


Set channel center frequency
----------------------------

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **echo 4000 \> out\_altvoltage0\_filter\_band\_pass\_bandwidth\_3db\_frequency**
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_filter\_band\_pass\_center\_frequency**
**4023**
```
:::


Read low pass 3db frequency
---------------------------

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_filter\_low\_pass\_3db\_frequency**
**5430**
```
:::


Set channel low pass 3db frequency
----------------------------------

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **echo 8000 \> out\_altvoltage0\_filter\_low\_pass\_3db\_frequency**
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_filter\_low\_pass\_3db\_frequency**
**8200**
```
:::


Read high pass 3db frequency
----------------------------

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_filter\_high\_pass\_3db\_frequency**
**4680**
```
:::


Set channel high pass 3db frequency
-----------------------------------

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **echo 6000 \> out\_altvoltage0\_filter\_high\_pass\_3db\_frequency**
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_filter\_high\_pass\_3db\_frequency**
**5960**
```
:::


Read scale
----------

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_scale**
**1000000**
```
:::


Set channel scale
-----------------

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **echo 10000000 \> out\_altvoltage0\_scale**
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_scale**
**10000000**
```
:::


Filter mode
-----------

The mode allows the user to access enable/disable/register/unregister the clock rate notifier. Valid values that can be written:

:::{NOTE} <!-- ATTRS: box="" bggreen\="" -->
:::{HINT} <!-- ATTRS: info\="" -->
This specifies any shell prompt running on the target
:::

```bash
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_mode\_available**
auto manual bypass
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_mode**
auto
root\@analog:/sys/bus/iio/devices/iio:device0\# **echo bypass \> out\_altvoltage0\_mode**
root\@analog:/sys/bus/iio/devices/iio:device0\# **cat out\_altvoltage0\_mode**
bypass
```
:::


More Information
================

![iio\_snippets\#iio pointers&noheader&firstseconly&noeditbtn](/page>software/linux/docs/iio/iio_snippets#iio pointers&noheader&firstseconly&noeditbtn)
