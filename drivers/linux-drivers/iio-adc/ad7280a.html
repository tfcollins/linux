<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>AD7280A IIO Lithium Ion Battery Monitoring System Linux Driver &#8212; Linux Kernel: Variant from Analog Devices, Inc. v6.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.min.css?v=cf8483f0" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <script src="../../../_static/documentation_options.js?v=cb43cce9"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/tabs.js?v=3ee01567"></script>
    <script defer="" src="../../../_static/app.umd.js?v=96350458"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="AD7291 IIO ADC Linux Driver" href="ad7291.html" />
    <link rel="prev" title="AD7266 Differential/Single-Ended Input, Dual, Simultaneous Sampling, 2 MSPS, 12-Bit, 3-Channel SAR A/D Converter Linux Driver" href="ad7266.html" />
   
  
    <meta name="robots" content="noindex">
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <header>
    <div class="header">
      <div id="left">
        <label id="show-sidebar" for="input-show-toc" title="Show/hide index"></label>
      </div>
      <div id="right">
        <span>
          <a id="logo-org" href="https://analog.com"></a>
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a>
        </span>
        <span class="reverse">
          <label id="show-localtoc" for="input-show-localtoc" title="Show/hide contents"></label>
        </span>
      </div>
    </div>
    <div class="repotoc-tree">
      <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

    </div>
  </header>

    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">AD7280A IIO Lithium Ion Battery Monitoring System Linux Driver</a><ul>
<li><a class="reference internal" href="#supported-devices">Supported Devices</a></li>
<li><a class="reference internal" href="#reference-circuits">Reference Circuits</a></li>
<li><a class="reference internal" href="#evaluation-boards">Evaluation Boards</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a><ul>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#files">Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-platform-device-initialization">Example platform device initialization</a></li>
<li><a class="reference internal" href="#adding-linux-driver-support">Adding Linux driver support</a></li>
<li><a class="reference internal" href="#hardware-configuration">Hardware configuration</a></li>
<li><a class="reference internal" href="#driver-testing">Driver testing</a><ul>
<li><a class="reference internal" href="#show-device-name">Show device name</a></li>
<li><a class="reference internal" href="#show-cell-channel-scale">Show cell channel scale</a></li>
<li><a class="reference internal" href="#show-channel-0-1-measurement">Show channel 0-1 measurement</a></li>
<li><a class="reference internal" href="#show-voltage-across-all-cells-measurement">Show voltage across all cells measurement</a></li>
<li><a class="reference internal" href="#show-auxiliary-temperature-channel-scale">Show auxiliary/temperature channel scale</a></li>
<li><a class="reference internal" href="#show-auxiliary-temperature-channel-measurement">Show auxiliary/temperature channel measurement</a></li>
<li><a class="reference internal" href="#enable-cell-balance-output-switch-on-channel-4-5">Enable cell balance output switch on channel 4-5</a></li>
<li><a class="reference internal" href="#enable-cell-balance-timer-on-channel-4-5">Enable cell balance timer on channel 4-5</a></li>
<li><a class="reference internal" href="#enabling-cell-and-auxiliary-temperature-channel-threshold-events">Enabling cell and auxiliary/temperature channel threshold events</a></li>
</ul>
</li>
<li><a class="reference internal" href="#more-information">More Information</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="../../../drivers_index.html">Linux Drivers</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../multifunction-device/adp5520.html">ADP5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8860.html">ADP8860</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8870.html">ADP8870</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clk/adi/clk-ad9545.c.html">AD9545</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5588.html">ADP5587</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5589.html">ADP5585</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/axi_fan_control.html">Fan Control IP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/ltc2947.html">LTC2947</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin1100.html">ADIN1100</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin.html">ADIN1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/adin1110.html">ADIN1110</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/adin2111.html">ADIN2111</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/open_alliance.html">Open Alliance - 10BASE-T1x MAC-PHY Serial Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl313.html">ADXL312,</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl345.html">ADXL345</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl355.html">ADXL355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl362.html">ADXL362</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl367.html">ADXL367</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl372.html">ADXL372</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16201.html">ADIS16201</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16203.html">ADIS16203</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16209.html">ADIS16209</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16240.html">ADIS16240</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/ad8366.html">AD8366</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/ada4250.html">ADA4250</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/hmc425a.html">HMC425</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad400x.html">AD4003</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad4630.html">AD4030-24</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad9208.html">AD6684</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7476a.html">AD7091</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7091r5.html">AD7091R-5</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7091r8.html">AD7091R-8</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7124.html">AD7124</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7780.html">AD7170</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7192.html">AD7190</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7266.html">AD7265</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">AD7280A</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7291.html">AD7291</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7298.html">AD7298</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad738x.html">AD7380</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7606.html">AD7605-4</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7766.html">AD7766-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7768-1.html">AD7768-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7768.html">AD7768</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7793.html">AD7785</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7791.html">AD7787</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7887.html">AD7887</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7998.html">AD7991</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad9083.html">AD9083</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-mxfe/ad9081.html">AD9207</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../resources/tools-software/linux-drivers/iio-adc/ad9208.html">AD9208</a></li>
<li class="toctree-l2"><a class="reference internal" href="axi-adc-hdl.html">AD9234</a></li>
<li class="toctree-l2"><a class="reference internal" href="adaq8092.html">ADAQ8092</a></li>
<li class="toctree-l2"><a class="reference internal" href="adas1000.html">ADAS1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adar1000.html">ADAR1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7152.html">AD7152</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7150.html">AD7150</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7745.html">AD7745</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-addac/ad74413r.html">AD74412R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/axi-ad3552r.html">AD3552R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5064.html">AD5024</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5446.html">AD5300</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5676.html">AD5310R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5360.html">AD5360</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5380.html">AD5380</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5449.html">AD5415</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5421.html">AD5421</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5504.html">AD5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5592r.html">AD5592R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5593r.html">AD5593R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5624r.html">AD5624</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5755.html">AD5735</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5764.html">AD5744</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5758.html">AD5758</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5791.html">AD5760</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5770r.html">AD5770R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/axi-dac-dds-hdl.html">AD9122</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ltc2664.html">LTC2664</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/ad9832.html">AD9832</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/ad9834.html">AD9833</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-filter/admv8818.html">ADMV8818</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9162.html">AD9161</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9508.html">AD9508</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9517.html">AD9516-0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9523.html">AD9523-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9528.html">AD9528</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4159.html">ADF4159</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4350.html">ADF4350</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4360.html">ADF4360-0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4371.html">ADF4371</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4377.html">ADF4377</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf5355.html">ADF4355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/admv1013.html">ADMV1013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/admv1014.html">ADMV1014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adrf6780.html">ADRF6780</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/hmc7044.html">HMC7044</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ltc6952.html">LTC6952</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16060.html">ADIS16060</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16080.html">ADIS16080</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16130.html">ADIS16130</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16136.html">ADIS16133</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16260.html">ADIS16251</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adxrs450.html">ADXRS450</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-impedance-analyzer/ad5933.html">AD5933</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16400.html">ADIS16300</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16480.html">ADIS16375</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16475.html">ADIS16460</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s90.html">AD2S90</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s1200.html">AD2S1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s1210.html">AD2S1210</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad6676.html">AD6676</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/ad9361.html">AD9361</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/ad9371.html">AD9371</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adrv9002.html">ADRV9002</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adrv9009.html">ADRV9008-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-temperature/ltc2983.html">LTC2983</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-vector-power/adl5960.html">ADL5960</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/ad714x.html">AD7142</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7873.html">AD7873</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7877.html">AD7877</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7879.html">AD7879</a></li>
<li class="toctree-l2"><a class="reference internal" href="../leds/adp1650.html">ADP1650</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/dpot.html">AD5160</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mux/adgs1408.html">ADGS1408</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking-mac802154/adf7242.html">ADF7241</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator/adp150.html">ADP122</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator/ad5398.html">AD5398</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial/max310x.html">MAX3107</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ad1835a.html">AD1835A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ad1936.html">AD1933</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ad73322.html">AD73311</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1361.html">ADAU1361</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1372.html">ADAU1372</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1373.html">ADAU1373</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1381.html">ADAU1381</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1701.html">ADAU1401A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1977.html">ADAU1977</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau7002.html">ADAU7002</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau7118.html">ADAU7118</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adav801.html">ADAV801</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ssm2602.html">SSM2602</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ssm4567.html">SSM4567</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drm/adv7511.html">ADV7511</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build.html">Building Kernels</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="ad7280a-iio-lithium-ion-battery-monitoring-system-linux-driver">
<h1>AD7280A IIO Lithium Ion Battery Monitoring System Linux Driver<a class="headerlink" href="#ad7280a-iio-lithium-ion-battery-monitoring-system-linux-driver" title="Link to this heading">¶</a></h1>
<section id="supported-devices">
<h2>Supported Devices<a class="headerlink" href="#supported-devices" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#adi%3EAD7280A"><span class="xref myst">AD7280A</span></a></p></li>
</ul>
</section>
<section id="reference-circuits">
<h2>Reference Circuits<a class="headerlink" href="#reference-circuits" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#adi%3ECN0197"><span class="xref myst">CN0197</span></a></p></li>
<li><p><a class="reference internal" href="#adi%3ECN0235"><span class="xref myst">CN0235</span></a></p></li>
</ul>
</section>
<section id="evaluation-boards">
<h2>Evaluation Boards<a class="headerlink" href="#evaluation-boards" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#adi%3EEVAL-AD7280AEDZ"><span class="xref myst">EVAL-AD7280AEDZ</span></a></p></li>
</ul>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>This is a Linux industrial I/O (<a class="reference internal" href="#/software/linux/docs/iio/iio"><span class="xref myst">IIO</span></a>) subsystem driver, targeting multi channel serial interface ADCs.
The industrial I/O subsystem provides a unified framework for drivers for many different types of converters and sensors using a number of different physical interfaces (i2c, spi, etc).
See <a class="reference internal" href="#/software/linux/docs/iio/iio"><span class="xref myst">IIO</span></a> for more information.</p>
<p>The AD7280A contains all the functions required for general-purpose monitoring of stacked lithium ion batteries as used in hybrid electric vehicles, battery backup applications, and power
tools. The part has multiplexed cell voltage and auxiliary ADC measurement channels for up to six cells of battery management.
This driver supports the daisy-chain interface allowing up to eight parts to be stacked
without the need for individual device isolation.</p>
<p>The driver automatically detects then number of devices present and creates the iio device files accordingly.</p>
</section>
<section id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Link to this heading">¶</a></h2>
<section id="status">
<h3>Status<a class="headerlink" href="#status" title="Link to this heading">¶</a></h3>
<table>
<thead>
<tr class="header">
<th>Source</th>
<th>Mainlined?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="staging.kernel.org&gt;drivers/staging/iio/adc/ad7280a.c">git</a></td>
<td><a href="staging.kernel.org&gt;drivers/staging/iio/adc/ad7280a.c">Yes</a></td>
</tr>
</tbody>
</table>
</section>
<section id="files">
<h3>Files<a class="headerlink" href="#files" title="Link to this heading">¶</a></h3>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>driver</td>
<td><a href="staging.kernel.org&gt;drivers/staging/iio/adc/ad7280a.c">drivers/staging/iio/adc/ad7280a.c</a></td>
</tr>
<tr class="even">
<td>include</td>
<td><a href="staging.kernel.org&gt;drivers/staging/iio/adc/ad7280a.h">drivers/staging/iio/adc/ad7280a.h</a></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="example-platform-device-initialization">
<h2>Example platform device initialization<a class="headerlink" href="#example-platform-device-initialization" title="Link to this heading">¶</a></h2>
<p>![](page&gt;software/linux/docs/platform_and_bus_model#Platform Data&amp;noheader&amp;firstseconly&amp;noeditbtn)</p>
<p>Some device parameter may vary between applications and use cases. The platform_data for the device’s “struct device” holds this information.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define AD7280A_ACQ_TIME_400ns          0</span>
<span class="cp">#define AD7280A_ACQ_TIME_800ns          1</span>
<span class="cp">#define AD7280A_ACQ_TIME_1200ns         2</span>
<span class="cp">#define AD7280A_ACQ_TIME_1600ns         3</span>

<span class="cp">#define AD7280A_CONV_AVG_DIS            0</span>
<span class="cp">#define AD7280A_CONV_AVG_2          1</span>
<span class="cp">#define AD7280A_CONV_AVG_4          2</span>
<span class="cp">#define AD7280A_CONV_AVG_8          3</span>

<span class="cp">#define AD7280A_ALERT_REMOVE_VIN5       (1 &lt;&lt; 2)</span>
<span class="cp">#define AD7280A_ALERT_REMOVE_VIN4_VIN5      (2 &lt;&lt; 2)</span>
<span class="cp">#define AD7280A_ALERT_REMOVE_AUX5       (1 &lt;&lt; 0)</span>
<span class="cp">#define AD7280A_ALERT_REMOVE_AUX4_AUX5      (2 &lt;&lt; 0)</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">ad7280_platform_data</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">acquisition_time</span><span class="p">;</span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">conversion_averaging</span><span class="p">;</span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">chain_last_alert_ignore</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">thermistor_term_en</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>&lt;WRAP tip&gt;
In case platform_data is not present or set to NULL, the driver will use following defaults:\</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">ad7280_platform_data</span><span class="w"> </span><span class="n">ad7280_default_pdata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">acquisition_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AD7280A_ACQ_TIME_400ns</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">conversion_averaging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AD7280A_CONV_AVG_DIS</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">thermistor_term_en</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
<p>&lt;/WRAP&gt;</p>
<p>![](page&gt;software/linux/docs/platform_and_bus_model#Declaring SPI slave devices&amp;firstseconly&amp;noeditbtn)</p>
<p>Depending on the converter IC used, you may need to set the modalias accordingly, matching your part name.
It may also required to adjust max_speed_hz. Please consult the datasheet, for maximum spi clock supported by the device in question.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">spi_board_info</span><span class="w"> </span><span class="n">board_spi_board_info</span><span class="p">[]</span><span class="w"> </span><span class="n">__initdata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="cp">#if defined(CONFIG_AD7280A) || \</span>
<span class="cp">    defined(CONFIG_AD7280A_MODULE)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">modalias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ad7280a&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000000</span><span class="p">,</span><span class="w">     </span><span class="cm">/* max spi clock (SCK) speed in HZ */</span>
<span class="w">        </span><span class="p">.</span><span class="n">bus_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_PF10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MAX_CTRL_CS</span><span class="p">,</span><span class="w"> </span><span class="cm">/* CS, change it for your board */</span>
<span class="w">        </span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_MODE_1</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">irq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IRQ_PF6</span>
<span class="w">    </span><span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">__init</span><span class="w"> </span><span class="nf">board_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>

<span class="w">    </span><span class="n">spi_register_board_info</span><span class="p">(</span><span class="n">board_spi_board_info</span><span class="p">,</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">board_spi_board_info</span><span class="p">));</span>

<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">arch_initcall</span><span class="p">(</span><span class="n">board_init</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="adding-linux-driver-support">
<h2>Adding Linux driver support<a class="headerlink" href="#adding-linux-driver-support" title="Link to this heading">¶</a></h2>
<p>Configure kernel with “make menuconfig” (alternatively use “make xconfig” or
“make qconfig”)</p>
<p>&lt;WRAP round help&gt;
The AD7280A Driver depends on <strong>CONFIG_SPI</strong>
&lt;/WRAP&gt;</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Linux Kernel Configuration
    Device Drivers  ---&gt;
        [*] Staging drivers  ---&gt;
            &lt;*&gt;     Industrial I/O support ---&gt;
                --- Industrial I/O support
                -*-   Enable ring buffer support within IIO
                -*-     Industrial I/O lock free software ring
                -*-   Enable triggered sampling support

                      *** Analog to digital converters ***
                [--snip--]

                &lt;*&gt;   Analog Devices AD7280A Lithium Ion Battery Monitoring System

                [--snip--]
</pre></div>
</div>
</section>
<section id="hardware-configuration">
<h2>Hardware configuration<a class="headerlink" href="#hardware-configuration" title="Link to this heading">¶</a></h2>
<p><img alt="ad7280_eval_lr.jpg" src="resources/tools-software/linux-drivers/iio-adc/ad7280_eval_lr.jpg" />{width=“600” query=“?600”}</p>
</section>
<section id="driver-testing">
<h2>Driver testing<a class="headerlink" href="#driver-testing" title="Link to this heading">¶</a></h2>
<p>![iio_snippets#iio device files&amp;noheader&amp;firstseconly&amp;noeditbtn](/page&gt;software/linux/docs/iio/iio_snippets#iio device files&amp;noheader&amp;firstseconly&amp;noeditbtn)</p>
<p>&lt;WRAP box bggreen&gt;&lt;wrap info&gt;This specifies any shell prompt running on the target&lt;/wrap&gt;
&lt;xterm&gt;
root:/&gt; <strong>cd /sys/bus/iio/devices/</strong>
root:/sys/bus/iio/devices&gt; ls
device0 device0:event0
root:/sys/bus/iio/devices&gt; <strong>cd device0</strong></p>
<p>root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>ls -l</strong>
drwxr-xr-x 3 root root 0 Mar 14 11:16 device0:event0
-rw-r–r– 1 root root 4096 Mar 14 11:16 in-in_scale
-r–r–r– 1 root root 4096 Mar 14 11:16 in0-in12_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in0-in1_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in0-in1_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in0-in1_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in1-in2_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in1-in2_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in1-in2_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in10-in11_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in10-in11_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in10-in11_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in11-in12_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in11-in12_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in11-in12_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in2-in3_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in2-in3_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in2-in3_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in3-in4_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in3-in4_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in3-in4_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in4-in5_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in4-in5_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in4-in5_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in5-in6_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in5-in6_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in5-in6_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in6-in7_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in6-in7_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in6-in7_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in7-in8_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in7-in8_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in7-in8_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in8-in9_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in8-in9_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in8-in9_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 in9-in10_balance_switch_en
-rw-r–r– 1 root root 4096 Mar 14 11:16 in9-in10_balance_timer
-r–r–r– 1 root root 4096 Mar 14 11:16 in9-in10_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 name
drwxr-xr-x 2 root root 0 Mar 14 11:16 power
lrwxrwxrwx 1 root root 0 Mar 14 11:16 subsystem -&gt; …/…/…/…/…/bus/iio
-r–r–r– 1 root root 4096 Mar 14 11:16 temp0_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 temp10_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 temp11_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 temp1_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 temp2_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 temp3_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 temp4_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 temp5_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 temp6_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 temp7_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 temp8_raw
-r–r–r– 1 root root 4096 Mar 14 11:16 temp9_raw
-rw-r–r– 1 root root 4096 Mar 14 11:16 temp_scale
-rw-r–r– 1 root root 4096 Mar 14 11:16 uevent
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt;
&lt;/xterm&gt;&lt;/WRAP&gt;</p>
<section id="show-device-name">
<h3>Show device name<a class="headerlink" href="#show-device-name" title="Link to this heading">¶</a></h3>
<p>&lt;WRAP box bggreen&gt;&lt;wrap info&gt;This specifies any shell prompt running on the target&lt;/wrap&gt;
&lt;xterm&gt;
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>cat name</strong>
ad7280a
&lt;/xterm&gt;&lt;/WRAP&gt;</p>
</section>
<section id="show-cell-channel-scale">
<h3>Show cell channel scale<a class="headerlink" href="#show-cell-channel-scale" title="Link to this heading">¶</a></h3>
<p><strong>Description:</strong><br />
scale to be applied to inX-inY_raw in order to obtain the measured voltage in millivolts.</p>
<p>&lt;WRAP box bggreen&gt;&lt;wrap info&gt;This specifies any shell prompt running on the target&lt;/wrap&gt;
&lt;xterm&gt;
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>cat in-in_scale</strong>
0.976000
&lt;/xterm&gt;&lt;/WRAP&gt;</p>
</section>
<section id="show-channel-0-1-measurement">
<h3>Show channel 0-1 measurement<a class="headerlink" href="#show-channel-0-1-measurement" title="Link to this heading">¶</a></h3>
<p><strong>Description:</strong><br />
Raw unscaled voltage measurement on cell channel in0-in1_raw</p>
<p>&lt;WRAP box bggreen&gt;&lt;wrap info&gt;This specifies any shell prompt running on the target&lt;/wrap&gt;
&lt;xterm&gt;
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>cat in0-in1_raw</strong>
2254
&lt;/xterm&gt;&lt;/WRAP&gt;</p>
<p><strong>U</strong> = <em>in0-in1_raw * in-in_scale + offset</em> = 2254 * 0.976000 + 1000 = <strong>3199.904 <em>mV</em></strong></p>
</section>
<section id="show-voltage-across-all-cells-measurement">
<h3>Show voltage across all cells measurement<a class="headerlink" href="#show-voltage-across-all-cells-measurement" title="Link to this heading">¶</a></h3>
<p><strong>Description:</strong><br />
Raw unscaled voltage measurement on all cell channel in0-inX_raw</p>
<p>&lt;WRAP box bggreen&gt;&lt;wrap info&gt;This specifies any shell prompt running on the target&lt;/wrap&gt;
&lt;xterm&gt;
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>cat in0-in12_raw</strong>
27048
&lt;/xterm&gt;&lt;/WRAP&gt;</p>
<p><strong>U</strong> = <em>in0-in1_raw * in-in_scale + (cell_num * offset)</em> = 27048 * 0.976000 + (12 * 1000) = <strong>38398.848 <em>mV</em></strong></p>
</section>
<section id="show-auxiliary-temperature-channel-scale">
<h3>Show auxiliary/temperature channel scale<a class="headerlink" href="#show-auxiliary-temperature-channel-scale" title="Link to this heading">¶</a></h3>
<p><strong>Description:</strong><br />
scale to be applied to tempX_raw in order to obtain the measured voltage in millivolts.</p>
<p>&lt;WRAP box bggreen&gt;&lt;wrap info&gt;This specifies any shell prompt running on the target&lt;/wrap&gt;
&lt;xterm&gt;
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>cat temp_scale</strong>
1.220000
&lt;/xterm&gt;&lt;/WRAP&gt;</p>
</section>
<section id="show-auxiliary-temperature-channel-measurement">
<h3>Show auxiliary/temperature channel measurement<a class="headerlink" href="#show-auxiliary-temperature-channel-measurement" title="Link to this heading">¶</a></h3>
<p><strong>Description:</strong><br />
Shows high accuracy band gap temperature sensor temperature in milli degrees Celsius.</p>
<p>&lt;WRAP box bggreen&gt;&lt;wrap info&gt;This specifies any shell prompt running on the target&lt;/wrap&gt;
&lt;xterm&gt;
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>cat temp0_raw</strong>
2096
&lt;/xterm&gt;&lt;/WRAP&gt;</p>
<p><strong>U</strong> = <em>temp0_raw * temp_scale</em> = 2096 * 1.220000 = <strong>2557.12 <em>mV</em></strong></p>
</section>
<section id="enable-cell-balance-output-switch-on-channel-4-5">
<h3>Enable cell balance output switch on channel 4-5<a class="headerlink" href="#enable-cell-balance-output-switch-on-channel-4-5" title="Link to this heading">¶</a></h3>
<p>The AD7280A has cell balancing interface outputs designed to control external
FET transistors to allow discharging of individual cells.</p>
<p><strong>Description:</strong><br />
Writing 1 enables the cell balance output switch corresponding<br />
to input Y. Writing 0 disables it. If the inY-inZ_balance_timer<br />
is set to a none zero value, the corresponding switch will<br />
enable for the programmed amount of time, before it<br />
automatically disables.<br />
&lt;WRAP box bggreen&gt;&lt;wrap info&gt;This specifies any shell prompt running on the target&lt;/wrap&gt;
&lt;xterm&gt;
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>echo 1 &gt; in4-in5_balance_switch_en</strong>
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>cat in4-in5_balance_switch_en</strong>
1</p>
<p>root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>echo 0 &gt; in4-in5_balance_switch_en</strong>
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>cat in4-in5_balance_switch_en</strong>
0
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt;
&lt;/xterm&gt;&lt;/WRAP&gt;</p>
</section>
<section id="enable-cell-balance-timer-on-channel-4-5">
<h3>Enable cell balance timer on channel 4-5<a class="headerlink" href="#enable-cell-balance-timer-on-channel-4-5" title="Link to this heading">¶</a></h3>
<p><strong>Description:</strong><br />
The inY-inZ_balance_timer file allows the user to program<br />
individual times for each cell balance output. The AD7280A<br />
allows the user to set the timer to a value from 0 minutes to<br />
36.9 minutes. The resolution of the timer is 71.5 sec.<br />
The value written is the on-time in milliseconds. When the<br />
timer value is set 0, the timer is disabled. The cell balance<br />
outputs are controlled only by inY-inZ_balance_switch_en.<br />
&lt;WRAP box bggreen&gt;&lt;wrap info&gt;This specifies any shell prompt running on the target&lt;/wrap&gt;
&lt;xterm&gt;
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>echo 150000 &gt; in4-in5_balance_timer</strong>
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt; <strong>cat in4-in5_balance_timer</strong>
143000
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0&gt;
&lt;/xterm&gt;&lt;/WRAP&gt;</p>
</section>
<section id="enabling-cell-and-auxiliary-temperature-channel-threshold-events">
<h3>Enabling cell and auxiliary/temperature channel threshold events<a class="headerlink" href="#enabling-cell-and-auxiliary-temperature-channel-threshold-events" title="Link to this heading">¶</a></h3>
<p>&lt;WRAP box bggreen&gt;&lt;wrap info&gt;This specifies any shell prompt running on the target&lt;/wrap&gt;
&lt;xterm&gt;
root:/&gt; <strong>cd /sys/bus/iio/devices/</strong>
root:/sys/bus/iio/devices&gt; ls
device0 device0:event0
root:/sys/bus/iio/devices&gt; <strong>cd device0:event0</strong></p>
<p>root:/sys/devices/platform/bfin-spi.0/spi0.18/device0/device0:event0&gt; <strong>ls -l</strong>
-r–r–r– 1 root root 4096 Mar 14 13:37 dev
-rw-r–r– 1 root root 4096 Mar 14 13:37 in-in_thresh_high_value
-rw-r–r– 1 root root 4096 Mar 14 13:37 in-in_thresh_low_value
drwxr-xr-x 2 root root 0 Mar 14 13:37 power
lrwxrwxrwx 1 root root 0 Mar 14 13:37 subsystem -&gt; …/…/…/…/…/…/bus/iio
-rw-r–r– 1 root root 4096 Mar 14 13:37 temp_thresh_high_value
-rw-r–r– 1 root root 4096 Mar 14 13:37 temp_thresh_low_value
-rw-r–r– 1 root root 4096 Mar 14 13:37 uevent
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0/device0:event0&gt;
&lt;/xterm&gt;&lt;/WRAP&gt;</p>
<p>The AD7280A includes a dynamic alert function that can detect whether
the cell voltages or auxiliary ADC inputs exceed an upper or lower limit defined by the user.</p>
<p><strong>Description:</strong><br />
Specifies the value of threshold (_high|_low) that the device is comparing against.</p>
<p>&lt;WRAP box bggreen&gt;&lt;wrap info&gt;This specifies any shell prompt running on the target&lt;/wrap&gt;
&lt;xterm&gt;
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0/device0:event0&gt; <strong>echo 2300 &gt; in-in_thresh_low_value</strong>
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0/device0:event0&gt; <strong>cat in-in_thresh_low_value</strong>
2285</p>
<p>root:/sys/devices/platform/bfin-spi.0/spi0.18/device0/device0:event0&gt; <strong>echo 4000 &gt; in-in_thresh_high_value</strong>
root:/sys/devices/platform/bfin-spi.0/spi0.18/device0/device0:event0&gt; <strong>cat in-in_thresh_high_value</strong>
3994
&lt;/xterm&gt;&lt;/WRAP&gt;</p>
</section>
</section>
<section id="more-information">
<h2>More Information<a class="headerlink" href="#more-information" title="Link to this heading">¶</a></h2>
<p>![iio_snippets#iio pointers&amp;noheader&amp;firstseconly&amp;noeditbtn](/page&gt;software/linux/docs/iio/iio_snippets#iio pointers&amp;noheader&amp;firstseconly&amp;noeditbtn)</p>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="ad7266.html" title="Previous document" class="prev">AD7266 Differential/Single-Ended Input, Dual, Simultaneous Sampling, 2 MSPS, 12-Bit, 3-Channel SAR A/D Converter Linux Driver</a>
    <a href="ad7291.html" title="Next document" class="next">AD7291 IIO ADC Linux Driver</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>

  
  <form action="" method="get" class="search-area">
    <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
    <button value="search"></button>
    <span id="search-progress"></span>
  </form>
  
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>