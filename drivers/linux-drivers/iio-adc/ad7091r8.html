<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>AD7091R-2/-4/-8 ADC Linux Driver &#8212; Linux Kernel: Variant from Analog Devices, Inc. v6.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.min.css?v=cf8483f0" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <script src="../../../_static/documentation_options.js?v=cb43cce9"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/tabs.js?v=3ee01567"></script>
    <script defer="" src="../../../_static/app.umd.js?v=96350458"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="AD7124 IIO Sigma-Delta ADC Linux Driver" href="ad7124.html" />
    <link rel="prev" title="AD7091R5 ADC Linux Driver" href="ad7091r5.html" />
   
  
    <meta name="robots" content="noindex">
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <header>
    <div class="header">
      <div id="left">
        <label id="show-sidebar" for="input-show-toc" title="Show/hide index"></label>
      </div>
      <div id="right">
        <span>
          <a id="logo-org" href="https://analog.com"></a>
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a>
        </span>
        <span class="reverse">
          <label id="show-localtoc" for="input-show-localtoc" title="Show/hide contents"></label>
        </span>
      </div>
    </div>
    <div class="repotoc-tree">
      <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

    </div>
  </header>

    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">AD7091R-2/-4/-8 ADC Linux Driver</a><ul>
<li><a class="reference internal" href="#supported-devices">Supported Devices</a></li>
<li><a class="reference internal" href="#evaluation-boards">Evaluation Boards</a></li>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#files">Files</a></li>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#hardware-configuration">Hardware configuration</a></li>
<li><a class="reference internal" href="#adding-linux-driver-support">Adding Linux driver support</a><ul>
<li><a class="reference internal" href="#enabling-the-driver">Enabling the driver</a></li>
<li><a class="reference internal" href="#adding-a-device-tree-entry">Adding a device tree entry</a><ul>
<li><a class="reference internal" href="#required-properties">Required properties</a></li>
<li><a class="reference internal" href="#optional-properties">Optional properties</a></li>
<li><a class="reference internal" href="#device-tree-generic-example">Device tree generic example</a></li>
<li><a class="reference internal" href="#device-tree-overlay-example">Device tree overlay example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#driver-testing">Driver testing</a><ul>
<li><a class="reference internal" href="#show-device-name">Show device name</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="../../../drivers_index.html">Linux Drivers</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../sound/ad1835a.html">AD1835A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ad1936.html">AD1933</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s1200.html">AD2S1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s1210.html">AD2S1210</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s90.html">AD2S90</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/axi-ad3552r.html">AD3552R</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad400x.html">AD4003</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad4630.html">AD4030-24</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5064.html">AD5024</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/dpot.html">AD5160</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5446.html">AD5300</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5676.html">AD5310R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5360.html">AD5360</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5380.html">AD5380</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator/ad5398.html">AD5398</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5449.html">AD5415</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5421.html">AD5421</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5504.html">AD5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5592r.html">AD5592R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5593r.html">AD5593R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5624r.html">AD5624</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5755.html">AD5735</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5764.html">AD5744</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5758.html">AD5758</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5791.html">AD5760</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5770r.html">AD5770R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-impedance-analyzer/ad5933.html">AD5933</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad6676.html">AD6676</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad9208.html">AD6684</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7476a.html">AD7091</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7091r5.html">AD7091R-5</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">AD7091R-8</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7124.html">AD7124-4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/ad714x.html">AD7142</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7150.html">AD7150</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7152.html">AD7152</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7780.html">AD7170</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7192.html">AD7190</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7266.html">AD7265</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7280a.html">AD7280A</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7291.html">AD7291</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7298.html">AD7298</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ad73322.html">AD73311</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad738x.html">AD7380</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-addac/ad74413r.html">AD74412R</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7606.html">AD7605-4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7745.html">AD7745</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7766.html">AD7766-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7768-1.html">AD7768-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7768.html">AD7768</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7793.html">AD7785</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7791.html">AD7787</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7873.html">AD7843</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7877.html">AD7877</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7879.html">AD7879-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7887.html">AD7887</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad7998.html">AD7991</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/ad8366.html">AD8366</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-mxfe/ad9081.html">AD9081</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad9083.html">AD9083</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/axi-dac-dds-hdl.html">AD9122</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9162.html">AD9161</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../resources/tools-software/linux-drivers/iio-adc/ad9208.html">AD9208</a></li>
<li class="toctree-l2"><a class="reference internal" href="axi-adc-hdl.html">AD9234</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/ad9361.html">AD9361</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/ad9371.html">AD9371</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9508.html">AD9508</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9517.html">AD9516-0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9523.html">AD9523-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9528.html">AD9528</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clk/adi/clk-ad9545.c.html">AD9545</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/ad9832.html">AD9832</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/ad9834.html">AD9833</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/ada4250.html">ADA4250</a></li>
<li class="toctree-l2"><a class="reference internal" href="adaq8092.html">ADAQ8092</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adar1000.html">ADAR1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="adas1000.html">ADAS1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1361.html">ADAU1361</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1372.html">ADAU1372</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1373.html">ADAU1373</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1381.html">ADAU1381</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1701.html">ADAU1401</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1977.html">ADAU1977</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau7002.html">ADAU7002</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau7118.html">ADAU7118</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adav801.html">ADAV801</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4159.html">ADF4159</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4350.html">ADF4350</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf5355.html">ADF4355-2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4360.html">ADF4360-0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4371.html">ADF4371</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4377.html">ADF4377</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking-mac802154/adf7242.html">ADF7241</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mux/adgs1408.html">ADGS1408</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin1100.html">ADIN1100</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/adin1110.html">ADIN1110</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin.html">ADIN1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/adin2111.html">ADIN2111</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16060.html">ADIS16060</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16080.html">ADIS16080</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16130.html">ADIS16130</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16136.html">ADIS16133</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16201.html">ADIS16201</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16203.html">ADIS16203</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16209.html">ADIS16209</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16240.html">ADIS16240</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16260.html">ADIS16250</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16400.html">ADIS16300</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16480.html">ADIS16375</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16475.html">ADIS16460</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-vector-power/adl5960.html">ADL5960</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/admv1013.html">ADMV1013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/admv1014.html">ADMV1014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-filter/admv8818.html">ADMV8818</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator/adp150.html">ADP122</a></li>
<li class="toctree-l2"><a class="reference internal" href="../leds/adp1650.html">ADP1650</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multifunction-device/adp5520.html">ADP5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5589.html">ADP5585</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5588.html">ADP5587</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8860.html">ADP8860</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8870.html">ADP8870</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adrf6780.html">ADRF6780</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adrv9002.html">ADRV9002</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adrv9009.html">ADRV9008-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drm/adv7511.html">ADV7511</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl313.html">ADXL312,</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl345.html">ADXL345</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl355.html">ADXL355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl362.html">ADXL362</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl367.html">ADXL367</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl372.html">ADXL372</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adxrs450.html">ADXRS450</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/axi_fan_control.html">Fan Control IP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/hmc425a.html">HMC425</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/hmc7044.html">HMC7043</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ltc2664.html">LTC2664</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/ltc2947.html">LTC2947</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-temperature/ltc2983.html">LTC2983</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ltc6952.html">LTC6952</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial/max310x.html">MAX14830</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/open_alliance.html">Open Alliance - 10BASE-T1x MAC-PHY Serial Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ssm2602.html">SSM2602</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ssm4567.html">SSM4567</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build.html">Building Kernels</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="ad7091r-2-4-8-adc-linux-driver">
<h1>AD7091R-2/-4/-8 ADC Linux Driver<a class="headerlink" href="#ad7091r-2-4-8-adc-linux-driver" title="Link to this heading">¶</a></h1>
<section id="supported-devices">
<h2>Supported Devices<a class="headerlink" href="#supported-devices" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://analog.com/AD7091R-2">AD7091R-2</a></p></li>
<li><p><a class="reference external" href="https://analog.com/AD7091R-4">AD7091R-4</a></p></li>
<li><p><a class="reference external" href="https://analog.com/AD7091R-8">AD7091R-8</a></p></li>
</ul>
</section>
<section id="evaluation-boards">
<h2>Evaluation Boards<a class="headerlink" href="#evaluation-boards" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://analog.com/en/design-center/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad7091r-2.html">EVAL-AD7091R-2</a></p></li>
</ul>
</section>
<section id="status">
<h2>Status<a class="headerlink" href="#status" title="Link to this heading">¶</a></h2>
<table>
<thead>
<tr class="header">
<th>Source</th>
<th>Mainlined?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="git.linux.org&gt;&gt;drivers/iio/adc/ad7091r8.c">git</a></td>
<td><a href="git.linux.org&gt;drivers/iio/adc/ad7091r8.c">Yes</a></td>
</tr>
</tbody>
</table>
</section>
<section id="files">
<h2>Files<a class="headerlink" href="#files" title="Link to this heading">¶</a></h2>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>header</td>
<td><a href="git.linux.org&gt;drivers/iio/adc/ad7091r-base.h">drivers/iio/adc/ad7091r-base.h</a></td>
</tr>
<tr class="even">
<td>base driver</td>
<td><a href="git.linux.org&gt;drivers/iio/adc/ad7091r-base.c">drivers/iio/adc/ad7091r-base.c</a></td>
</tr>
<tr class="odd">
<td>chip driver</td>
<td><a href="git.linux.org&gt;drivers/iio/adc/ad7091r8.c">drivers/iio/adc/ad7091r8.c</a></td>
</tr>
<tr class="even">
<td>devicetree bindings</td>
<td><a href="git.linux.org&gt;Documentation/devicetree/bindings/iio/adc/adi,ad7091r5.yaml">Documentation/devicetree/bindings/iio/adc/adi,ad7091r5.yaml</a></td>
</tr>
</tbody>
</table>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The <a class="reference external" href="https://analog.com/ad7091r-2">ad7091r-2</a>, <a class="reference external" href="https://analog.com/ad7091r-4">ad7091r-4</a>, and <a class="reference external" href="https://analog.com/AD7091r-8">AD7091r-8</a> are 2-/4-/8-channel, ultra lowpower power dissipation, 1 MSPS successive approximation register (SAR) analog-to-digital converter (ADC). The AD7091R-2/-4/-8 ADCs are multichannel versions of <a class="reference internal" href="#adi%3EAD7091r"><span class="xref myst">AD7091r</span></a>. The AD7091R-2/AD7091R-4/AD7091R-8 operates from a single 2.7 V to 5.25 V power supply and is capable of achieving a sampling rate of 1 MSPS.</p>
<p>The <a class="reference external" href="https://analog.com/media/en/technical-documentation/data-sheets/AD7091R-2_7091R-4_7091R-8.pdf">AD7091R-2/AD7091R-4/AD7091R-8</a> family offers up to eight single-ended analog input channels with a channel sequencer that allows a preprogrammed selection of channels to be converted sequentially.</p>
<p>The conversion process and data acquisition are controlled using the CONVST pin, which is pulsed on every read to the conversion result register. Writing and reading to registers other than the conversion result register will not trigger a pulse on the CONVST line.</p>
</section>
<section id="hardware-configuration">
<h2>Hardware configuration<a class="headerlink" href="#hardware-configuration" title="Link to this heading">¶</a></h2>
<p>Use the test points for interfacing the EVAL-AD7091R-xSDZ with a machine running Linux.</p>
<p>The instructions below describe how to set up <a class="reference internal" href="#adi%3Een/design-center/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad7091r-2.html"><span class="xref myst">EVAL-AD7091R-xSDZ</span></a> with <a class="reference external" href="https://www.raspberrypi.com/products/raspberry-pi-4-model-b/">RPI-4</a>.</p>
<p>The evaluation board default configuration is intended to work with <a class="reference external" href="https://analog.com/en/design-center/evaluation-hardware-and-software/evaluation-boards-kits/SDP-B.html">EVAL-SDP-CB1Z</a> so it must be adapted to connect to a different platform.</p>
<p>For the jumper links, use the following configuration:</p>
<table>
<thead>
<tr class="header">
<th>Link</th>
<th>Link Position</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>LK1</td>
<td>B</td>
</tr>
<tr class="even">
<td>LK2</td>
<td>B</td>
</tr>
<tr class="odd">
<td>LK3</td>
<td>B</td>
</tr>
<tr class="even">
<td>LK8</td>
<td>A</td>
</tr>
<tr class="odd">
<td>LK9</td>
<td>B</td>
</tr>
<tr class="even">
<td>LK11</td>
<td>A</td>
</tr>
</tbody>
</table>
<p>Use a soldering iron to change a few soldering links.</p>
<ul class="simple">
<li><p>Unsolder R126 (enable drive CS through CS test point)</p></li>
<li><p>Unsolder R127 (enable drive SDI through SDI test point)</p></li>
<li><p>Unsolder R128 (enable drive CONVST through CONVST test point)</p></li>
<li><p>Unsolder SL19 (enable drive SCLK through SCLK test point)</p></li>
<li><p>Unsolder SL20 (enable drive SDO through SDO test point)</p></li>
<li><p>Power VDD and Vdrive supplied with <a class="reference external" href="https://www.raspberrypi.com/products/raspberry-pi-4-model-b/">RPI-4</a> 3.3V pins.</p></li>
<li><p>Solder R68 points together (enable drive the RESET pin through RESET test point)</p></li>
<li><p>Unsolder LK13 and LK14 from position A and solder them in position C (tie MUX_OUT with ADC_IN).</p></li>
<li><p>Unsolder SL09 and SL10 from position A and solder each of them to position B to allow the VIN7 signal to bypass the input buffer.</p></li>
</ul>
<p>After the changes in the link positions and soldering links, the EVAL-AD7091R-xSDZ evaluation board should look like the following.</p>
<img alt="../../../_images/eval-ad7091r-8-links.jpg" src="../../../_images/eval-ad7091r-8-links.jpg" />
<p>There are a number of connections to make between the ADC evaluation board and the Linux machine.</p>
<table>
<thead>
<tr class="header">
<th>EVAL-AD7091R-xSDZ test point</th>
<th>Pin Function</th>
<th><a href="https://www.raspberrypi.com/products
/raspberry-pi-4-model-b/">RPI-4</a> Pin function (Pin number)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CS</td>
<td>Chip Select</td>
<td>CE0 (pin 24)</td>
</tr>
<tr class="even">
<td>SCLK</td>
<td>Serial Clock</td>
<td>SCLK (pin 23)</td>
</tr>
<tr class="odd">
<td>SDO</td>
<td>Serial Data Out</td>
<td>MISO (pin 21)</td>
</tr>
<tr class="even">
<td>SDI</td>
<td>Serial Data In</td>
<td>MOSI (pin 19)</td>
</tr>
<tr class="odd">
<td>RESET</td>
<td>ADC Reset</td>
<td>GPIO 27 (pin 13)</td>
</tr>
<tr class="even">
<td>CONVST</td>
<td>Conversion Start Signal</td>
<td>GPIO 25 (pin 22)</td>
</tr>
<tr class="odd">
<td>VDRIVE (J4)</td>
<td>Digital Supply Voltage Input</td>
<td>3.3V (pin 17</td>
</tr>
<tr class="even">
<td>GND (J4)</td>
<td>Digital Supply Voltage Ground</td>
<td>GND (pin 20)</td>
</tr>
<tr class="odd">
<td>VDD (J9)</td>
<td>Power Supply Input</td>
<td>3.3V (pin 1)</td>
</tr>
<tr class="even">
<td>GND (J9)</td>
<td>Power Supply Ground</td>
<td>GND (pin 6)</td>
</tr>
</tbody>
</table>
<p>Where J4 is the external VDRIVE and GND power connector and J9 is the external VDD and GND power connector.</p>
<p>Here is how it looks after everything is connected.</p>
<img alt="../../../_images/eval-ad7091r-8-sdz-raspberrypi.jpg" src="../../../_images/eval-ad7091r-8-sdz-raspberrypi.jpg" />
<p>The collection of jumpers looks messy and hard to follow so review the textual description in case of doubt.</p>
</section>
<section id="adding-linux-driver-support">
<h2>Adding Linux driver support<a class="headerlink" href="#adding-linux-driver-support" title="Link to this heading">¶</a></h2>
<section id="enabling-the-driver">
<h3>Enabling the driver<a class="headerlink" href="#enabling-the-driver" title="Link to this heading">¶</a></h3>
<p>Configure kernel with “make menuconfig” (alternatively use “make xconfig” or
“make qconfig”)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: round="" help="" -->
<p>The AD7091R8 Driver depends on <strong>CONFIG_SPI</strong></p>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Linux Kernel Configuration
    Device Drivers  ---&gt;
        ...
        &lt;*&gt;     Industrial I/O support ---&gt;
            --- Industrial I/O support
            ...
            Analog to digital converters  ---&gt; 
                ...
                &lt;*&gt;   Analog Devices AD7091R8 ADC driver
                ...
            ...
        ...
</pre></div>
</div>
</section>
<section id="adding-a-device-tree-entry">
<h3>Adding a device tree entry<a class="headerlink" href="#adding-a-device-tree-entry" title="Link to this heading">¶</a></h3>
<section id="required-properties">
<h4>Required properties<a class="headerlink" href="#required-properties" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong>compatible</strong>: Must be one of “adi,ad7091r2”, “adi,ad7091r4”, “adi,ad7091r8”.</p></li>
<li><p><strong>reg</strong>: number of SPI chip select id for the device.</p></li>
<li><p><strong>adi,conversion-start-gpios</strong>: Device tree identifier of the CONVST pin.</p></li>
<li><p><strong>reset-gpios</strong>: Device tree identifier of the RESET pin.</p></li>
</ul>
</section>
<section id="optional-properties">
<h4>Optional properties<a class="headerlink" href="#optional-properties" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong>vref-supply</strong>: phandle + specifier to a regulator for the external VREF supply. If no external VREF is supplied this attribute should be omitted.
see: Documentation/devicetree/bindings/regulator/regulator.txt</p></li>
</ul>
</section>
<section id="device-tree-generic-example">
<h4>Device tree generic example<a class="headerlink" href="#device-tree-generic-example" title="Link to this heading">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>    #include &lt;dt-bindings/interrupt-controller/irq.h&gt;
    #include &lt;dt-bindings/gpio/gpio.h&gt;
    spi {
        #address-cells = &lt;1&gt;;
        #size-cells = &lt;0&gt;;

        adc@0 {
                compatible = &quot;adi,ad7091r8&quot;;
                reg = &lt;0x0&gt;;
                spi-max-frequency = &lt;45454545&gt;;
                vref-supply = &lt;&amp;adc_vref&gt;;
                convst-gpios = &lt;&amp;gpio 25 GPIO_ACTIVE_LOW&gt;;
                reset-gpios = &lt;&amp;gpio 27 GPIO_ACTIVE_LOW&gt;;
                interrupts = &lt;22 IRQ_TYPE_EDGE_FALLING&gt;;
                interrupt-parent = &lt;&amp;gpio&gt;;
        };
    };
</pre></div>
</div>
</section>
<section id="device-tree-overlay-example">
<h4>Device tree overlay example<a class="headerlink" href="#device-tree-overlay-example" title="Link to this heading">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// SPDX-License-Identifier: GPL-2.0

/dts-v1/;
/plugin/;

#include &lt;dt-bindings/interrupt-controller/irq.h&gt;
#include &lt;dt-bindings/gpio/gpio.h&gt;

/ {
    compatible = &quot;brcm,bcm2835&quot;, &quot;brcm,bcm2711&quot;;
};

&amp;gpio {
    ad7091r8_pins: ad7091r8_pins {
        brcm,pins = &lt;22&gt;; // interrupt
        brcm,function = &lt;0&gt;; // input
    };
};

&amp;spi0 {
    status = &quot;okay&quot;;

    cs-gpios = &lt;&amp;gpio 8 GPIO_ACTIVE_LOW&gt;;

    ad7091r8@0 {
        compatible = &quot;adi,ad7091r8&quot;;
        reg = &lt;0x0&gt;;
        spi-max-frequency = &lt;1000000&gt;;
        convst-gpios = &lt;&amp;gpio 25 GPIO_ACTIVE_LOW&gt;;
        reset-gpios = &lt;&amp;gpio 27 GPIO_ACTIVE_LOW&gt;;
        pinctrl-names = &quot;default&quot;;
        pinctrl-0 = &lt;&amp;ad7091r8_pins&gt;;
        interrupt-parent = &lt;&amp;gpio&gt;;
        interrupts = &lt;22 IRQ_TYPE_EDGE_FALLING&gt;;
    };
};

&amp;spidev0 {
    status = &quot;disabled&quot;;
};

&amp;spidev1 {
    status = &quot;disabled&quot;;
};
</pre></div>
</div>
</section>
</section>
</section>
<section id="driver-testing">
<h2>Driver testing<a class="headerlink" href="#driver-testing" title="Link to this heading">¶</a></h2>
<!-- CMDS: noheader firstseconly noeditbtn -->
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: top="" tip="" round="" box="" 60%="" -->
<p><strong>TIP:</strong>
An example program whiroot&#64;analog:/sys/bus/iio/devices# ls -lch uses the interface can be found here:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#/resources/tools-software/linux-software/iio_oscilloscope"><span class="xref myst">IIO Oscilloscope</span></a></p></li>
</ul>
</div>
<section id="show-device-name">
<h3>Show device name<a class="headerlink" href="#show-device-name" title="Link to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio:device0/name
ad7091r-8
</pre></div>
</div>
<div class="docutils">
<h5 class="rubric" id="show-channel-scale">Show channel scale</h5>
<p><strong>Description:</strong>
Scale to be applied to in_voltageX_raw in order to obtain the measured voltage in millivolts</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio:device0/in_voltage_scale
<span class="m">0</span>.610351562
</pre></div>
</div>
<div class="docutils">
<p>Example test single-shot readings through IIO device sysfs interface.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>/sys/bus/iio/devices/iio:device0/
total<span class="w"> </span><span class="m">0</span>
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>in_voltage0_raw
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>in_voltage1_raw
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>in_voltage2_raw
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>in_voltage3_raw
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>in_voltage4_raw
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>in_voltage5_raw
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>in_voltage6_raw
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>in_voltage7_raw
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>in_voltage_scale
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>name
lrwxrwxrwx<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>of_node<span class="w"> </span>-&gt;<span class="w"> </span>../../../../../../../../firmware/devicetree/base/soc/spi@7e204000/ad7091r8@0
drwxr-xr-x<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>power
lrwxrwxrwx<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>subsystem<span class="w"> </span>-&gt;<span class="w"> </span>../../../../../../../../bus/iio
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:24<span class="w"> </span>uevent
marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio:device0/in_voltage_scale
<span class="m">0</span>.610351562
marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio:device0/in_voltage0_raw
<span class="m">2711</span>
marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio:device0/in_voltage0_raw
<span class="m">2717</span>
marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio:device0/in_voltage0_raw
<span class="m">2716</span>
marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio:device0/in_voltage2_raw
<span class="m">2715</span>
marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio:device0/in_voltage5_raw
<span class="m">1</span>
marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio:device0/in_voltage1_raw
<span class="m">1428</span>
marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio:device0/in_voltage6_raw
<span class="m">1</span>
</pre></div>
</div>
<div class="docutils">
<h5 class="rubric" id="play-with-iio-events">Play with IIO events</h5>
<p><strong>Description:</strong>
IIO events are a way for the IIO subsystem to notify applications when some event of importance happens.</p>
<p>Example monitoring IIO events and being notified when ADC readings fall above or below the limit registers.
The voltage supplied to channel 6 is roughly 1.63V throughout the example.
Two shells/terminals are used. First, in one of the shells, run <code class="docutils literal notranslate"><span class="pre">iio_event_monitor</span></code> to catch IIO events.
Then, on the other shell, configure device low limit and high limit registers and experiment with them.
The commands and output on the device shell are shown first followed by the commands and output on the shell monitoring IIO events.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>sudo<span class="w"> </span>su
root@raspberrypi:~#<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/sys/bus/iio/devices/iio:device0/events/
root@raspberrypi:/sys/bus/iio/devices/iio:device0/events#
root@raspberrypi:/sys/bus/iio/devices/iio:device0/events#<span class="w"> </span>ls<span class="w"> </span>-l
total<span class="w"> </span><span class="m">0</span>
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage0_thresh_either_hysteresis
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage0_thresh_falling_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage0_thresh_falling_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage0_thresh_rising_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage0_thresh_rising_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage1_thresh_either_hysteresis
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage1_thresh_falling_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage1_thresh_falling_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage1_thresh_rising_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage1_thresh_rising_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage2_thresh_either_hysteresis
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage2_thresh_falling_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage2_thresh_falling_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage2_thresh_rising_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage2_thresh_rising_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage3_thresh_either_hysteresis
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage3_thresh_falling_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage3_thresh_falling_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage3_thresh_rising_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage3_thresh_rising_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage4_thresh_either_hysteresis
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage4_thresh_falling_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage4_thresh_falling_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage4_thresh_rising_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage4_thresh_rising_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage5_thresh_either_hysteresis
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage5_thresh_falling_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage5_thresh_falling_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage5_thresh_rising_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage5_thresh_rising_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage6_thresh_either_hysteresis
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:38<span class="w"> </span>in_voltage6_thresh_falling_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:38<span class="w"> </span>in_voltage6_thresh_falling_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:38<span class="w"> </span>in_voltage6_thresh_rising_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:37<span class="w"> </span>in_voltage6_thresh_rising_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage7_thresh_either_hysteresis
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage7_thresh_falling_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage7_thresh_falling_value
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage7_thresh_rising_en
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span>:34<span class="w"> </span>in_voltage7_thresh_rising_value
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>in_voltage6_raw
<span class="m">2685</span>
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">300</span><span class="w"> </span>&gt;<span class="w"> </span>events/in_voltage6_thresh_falling_value
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>events/in_voltage6_thresh_falling_value
<span class="m">2400</span>
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>in_voltage6_raw
<span class="m">2677</span>
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>in_voltage6_raw
<span class="m">2692</span>
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">400</span><span class="w"> </span>&gt;<span class="w"> </span>events/in_voltage6_thresh_falling_value
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>events/in_voltage6_thresh_falling_value
<span class="m">3200</span>
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>in_voltage6_raw
<span class="m">2690</span>
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>in_voltage6_raw
<span class="m">2699</span>
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>in_voltage6_raw
<span class="m">2693</span>
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">300</span><span class="w"> </span>&gt;<span class="w"> </span>events/in_voltage6_thresh_rising_value
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>in_voltage6_raw
<span class="m">2680</span>
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>in_voltage6_raw
<span class="m">2692</span>
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>events/in_voltage6_thresh_rising_en
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>in_voltage6_raw
<span class="m">2680</span>
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>events/in_voltage6_thresh_falling_en
root@raspberrypi:/sys/bus/iio/devices/iio:device0#<span class="w"> </span>cat<span class="w"> </span>in_voltage6_raw
<span class="m">2694</span>
</pre></div>
</div>
<div class="docutils">
<p>The <code class="docutils literal notranslate"><span class="pre">iio_event_monitor</span></code> program can be obtained from the Linux kernel sources.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>./lsiio
Device<span class="w"> </span><span class="m">000</span>:<span class="w"> </span>ad7091r-8
marcelo@raspberrypi:~<span class="w"> </span>$<span class="w"> </span>sudo<span class="w"> </span>./iio_event_monitor<span class="w"> </span>ad7091r-8
Found<span class="w"> </span>IIO<span class="w"> </span>device<span class="w"> </span>with<span class="w"> </span>name<span class="w"> </span>ad7091r-8<span class="w"> </span>with<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">0</span>
Event:<span class="w"> </span>time:<span class="w"> </span><span class="m">1703012520403164042</span>,<span class="w"> </span>type:<span class="w"> </span>voltage,<span class="w"> </span>channel:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span>evtype:<span class="w"> </span>thresh,<span class="w"> </span>direction:<span class="w"> </span>falling
Event:<span class="w"> </span>time:<span class="w"> </span><span class="m">1703012523186611078</span>,<span class="w"> </span>type:<span class="w"> </span>voltage,<span class="w"> </span>channel:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span>evtype:<span class="w"> </span>thresh,<span class="w"> </span>direction:<span class="w"> </span>falling
Event:<span class="w"> </span>time:<span class="w"> </span><span class="m">1703012524620682715</span>,<span class="w"> </span>type:<span class="w"> </span>voltage,<span class="w"> </span>channel:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span>evtype:<span class="w"> </span>thresh,<span class="w"> </span>direction:<span class="w"> </span>falling
Event:<span class="w"> </span>time:<span class="w"> </span><span class="m">1703012610162721061</span>,<span class="w"> </span>type:<span class="w"> </span>voltage,<span class="w"> </span>channel:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span>evtype:<span class="w"> </span>thresh,<span class="w"> </span>direction:<span class="w"> </span>rising
Event:<span class="w"> </span>time:<span class="w"> </span><span class="m">1703012610162721061</span>,<span class="w"> </span>type:<span class="w"> </span>voltage,<span class="w"> </span>channel:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span>evtype:<span class="w"> </span>thresh,<span class="w"> </span>direction:<span class="w"> </span>falling
Event:<span class="w"> </span>time:<span class="w"> </span><span class="m">1703012612973228804</span>,<span class="w"> </span>type:<span class="w"> </span>voltage,<span class="w"> </span>channel:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span>evtype:<span class="w"> </span>thresh,<span class="w"> </span>direction:<span class="w"> </span>rising
Event:<span class="w"> </span>time:<span class="w"> </span><span class="m">1703012612973228804</span>,<span class="w"> </span>type:<span class="w"> </span>voltage,<span class="w"> </span>channel:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span>evtype:<span class="w"> </span>thresh,<span class="w"> </span>direction:<span class="w"> </span>falling
Event:<span class="w"> </span>time:<span class="w"> </span><span class="m">1703012646651554473</span>,<span class="w"> </span>type:<span class="w"> </span>voltage,<span class="w"> </span>channel:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span>evtype:<span class="w"> </span>thresh,<span class="w"> </span>direction:<span class="w"> </span>falling
</pre></div>
</div>
<div class="docutils">
<h2 class="rubric" id="more-information">More Information</h2>
<!-- CMDS: noheader firstseconly noeditbtn -->
</div>
</section>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="ad7091r5.html" title="Previous document" class="prev">AD7091R5 ADC Linux Driver</a>
    <a href="ad7124.html" title="Next document" class="next">AD7124 IIO Sigma-Delta ADC Linux Driver</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>

  
  <form action="" method="get" class="search-area">
    <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
    <button value="search"></button>
    <span id="search-progress"></span>
  </form>
  
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>