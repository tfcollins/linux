<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>SSM2602 Sound CODEC Linux Driver &#8212; Linux Kernel: Variant from Analog Devices, Inc. v6.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.min.css?v=cf8483f0" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <script src="../../../_static/documentation_options.js?v=cb43cce9"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/tabs.js?v=3ee01567"></script>
    <script defer="" src="../../../_static/app.umd.js?v=96350458"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="SSM4567 Audio Amplifier Linux Driver" href="ssm4567.html" />
    <link rel="prev" title="ADAV80X Sound CODEC Linux Driver" href="adav801.html" />
   
  
    <meta name="robots" content="noindex">
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <header>
    <div class="header">
      <div id="left">
        <label id="show-sidebar" for="input-show-toc" title="Show/hide index"></label>
      </div>
      <div id="right">
        <span>
          <a id="logo-org" href="https://analog.com"></a>
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a>
        </span>
        <span class="reverse">
          <label id="show-localtoc" for="input-show-localtoc" title="Show/hide contents"></label>
        </span>
      </div>
    </div>
    <div class="repotoc-tree">
      <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
</root>

    </div>
  </header>

    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">SSM2602 Sound CODEC Linux Driver</a><ul>
<li><a class="reference internal" href="#supported-devices">Supported Devices</a></li>
<li><a class="reference internal" href="#evaluation-boards">Evaluation Boards</a></li>
<li><a class="reference internal" href="#reference-circuits">Reference Circuits</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a><ul>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#files">Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-device-initialization">Example device initialization</a><ul>
<li><a class="reference internal" href="#spi">SPI</a></li>
<li><a class="reference internal" href="#i2c">I2C</a></li>
<li><a class="reference internal" href="#asoc-dapm-widgets">ASoC DAPM Widgets</a></li>
<li><a class="reference internal" href="#alsa-controls">ALSA Controls</a></li>
<li><a class="reference internal" href="#dai-configuration">DAI configuration</a><ul>
<li><a class="reference internal" href="#supported-dai-formats">Supported DAI formats</a></li>
<li><a class="reference internal" href="#supported-sysclk-rates">Supported SYSCLK rates</a></li>
<li><a class="reference internal" href="#example-dai-configuration">Example DAI configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#ssm2604-evaluation-board-driver">SSM2604 evaluation board driver</a><ul>
<li><a class="reference internal" href="#source">Source</a><ul>
<li><a class="reference internal" href="#id1">Status</a></li>
</ul>
</li>
<li><a class="reference internal" href="#as-a-module">As a Module</a></li>
<li><a class="reference internal" href="#testing-the-built-in-kernel-driver">Testing the built in kernel driver</a></li>
<li><a class="reference internal" href="#testing-the-audio-module">Testing the audio module</a></li>
<li><a class="reference internal" href="#testing-audio">Testing Audio</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build.html">Building Kernels</a></li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="../../../drivers_index.html">Linux Drivers</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../multifunction-device/adp5520.html">ADP5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8860.html">ADP8860</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8870.html">ADP8870</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clk/adi/clk-ad9545.c.html">AD9545</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5588.html">ADP5587</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5589.html">ADP5585</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/axi_fan_control.html">Fan Control IP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/ltc2947.html">LTC2947</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin1100.html">ADIN1100</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin.html">ADIN1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/adin1110.html">ADIN1110</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/adin2111.html">ADIN2111</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/open_alliance.html">Open Alliance - 10BASE-T1x MAC-PHY Serial Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl313.html">ADXL312,</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl345.html">ADXL345</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl355.html">ADXL355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl362.html">ADXL362</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl367.html">ADXL367</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl372.html">ADXL372</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16201.html">ADIS16201</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16203.html">ADIS16203</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16209.html">ADIS16209</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16240.html">ADIS16240</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/ad8366.html">AD8366</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/ada4250.html">ADA4250</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/hmc425a.html">HMC425</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad400x.html">AD4003</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad4630.html">AD4030-24</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad9208.html">AD6684</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7476a.html">AD7091</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7091r5.html">AD7091R-5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7091r8.html">AD7091R-8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7124.html">AD7124</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7780.html">AD7170</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7192.html">AD7190</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7266.html">AD7265</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7280a.html">AD7280A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7291.html">AD7291</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7298.html">AD7298</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad738x.html">AD7380</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7606.html">AD7605-4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7766.html">AD7766-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7768-1.html">AD7768-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7768.html">AD7768</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7793.html">AD7785</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7791.html">AD7787</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7887.html">AD7887</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7998.html">AD7991</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad9083.html">AD9083</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-mxfe/ad9081.html">AD9207</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../resources/tools-software/linux-drivers/iio-adc/ad9208.html">AD9208</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/axi-adc-hdl.html">AD9234</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/adaq8092.html">ADAQ8092</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/adas1000.html">ADAS1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adar1000.html">ADAR1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7152.html">AD7152</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7150.html">AD7150</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7745.html">AD7745</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-addac/ad74413r.html">AD74412R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/axi-ad3552r.html">AD3552R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5064.html">AD5024</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5446.html">AD5300</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5676.html">AD5310R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5360.html">AD5360</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5380.html">AD5380</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5449.html">AD5415</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5421.html">AD5421</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5504.html">AD5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5592r.html">AD5592R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5593r.html">AD5593R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5624r.html">AD5624</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5755.html">AD5735</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5764.html">AD5744</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5758.html">AD5758</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5791.html">AD5760</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5770r.html">AD5770R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/axi-dac-dds-hdl.html">AD9122</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ltc2664.html">LTC2664</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/ad9832.html">AD9832</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/ad9834.html">AD9833</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-filter/admv8818.html">ADMV8818</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9162.html">AD9161</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9508.html">AD9508</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9517.html">AD9516-0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9523.html">AD9523-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9528.html">AD9528</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4159.html">ADF4159</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4350.html">ADF4350</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4360.html">ADF4360-0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4371.html">ADF4371</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4377.html">ADF4377</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf5355.html">ADF4355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/admv1013.html">ADMV1013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/admv1014.html">ADMV1014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adrf6780.html">ADRF6780</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/hmc7044.html">HMC7044</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ltc6952.html">LTC6952</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16060.html">ADIS16060</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16080.html">ADIS16080</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16130.html">ADIS16130</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16136.html">ADIS16133</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16260.html">ADIS16251</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adxrs450.html">ADXRS450</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-impedance-analyzer/ad5933.html">AD5933</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16400.html">ADIS16300</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16480.html">ADIS16375</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16475.html">ADIS16460</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s90.html">AD2S90</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s1200.html">AD2S1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s1210.html">AD2S1210</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad6676.html">AD6676</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/ad9361.html">AD9361</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/ad9371.html">AD9371</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adrv9002.html">ADRV9002</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adrv9009.html">ADRV9008-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-temperature/ltc2983.html">LTC2983</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-vector-power/adl5960.html">ADL5960</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/ad714x.html">AD7142</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7873.html">AD7873</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7877.html">AD7877</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7879.html">AD7879</a></li>
<li class="toctree-l2"><a class="reference internal" href="../leds/adp1650.html">ADP1650</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/dpot.html">AD5160</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mux/adgs1408.html">ADGS1408</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking-mac802154/adf7242.html">ADF7241</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator/adp150.html">ADP122</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator/ad5398.html">AD5398</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial/max310x.html">MAX3107</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad1835a.html">AD1835A</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad1936.html">AD1933</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad73322.html">AD73311</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau1361.html">ADAU1361</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau1372.html">ADAU1372</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau1373.html">ADAU1373</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau1381.html">ADAU1381</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau1701.html">ADAU1401A</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau1977.html">ADAU1977</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau7002.html">ADAU7002</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau7118.html">ADAU7118</a></li>
<li class="toctree-l2"><a class="reference internal" href="adav801.html">ADAV801</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SSM2602</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssm4567.html">SSM4567</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drm/adv7511.html">ADV7511</a></li>
</ul>
</li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="ssm2602-sound-codec-linux-driver">
<h1>SSM2602 Sound CODEC Linux Driver<a class="headerlink" href="#ssm2602-sound-codec-linux-driver" title="Link to this heading">#</a></h1>
<section id="supported-devices">
<h2>Supported Devices<a class="headerlink" href="#supported-devices" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#adi%3ESSM2602"><span class="xref myst">SSM2602</span></a></p></li>
<li><p><a class="reference internal" href="#adi%3ESSM2603"><span class="xref myst">SSM2603</span></a></p></li>
<li><p><a class="reference internal" href="#adi%3ESSM2604"><span class="xref myst">SSM2604</span></a></p></li>
</ul>
</section>
<section id="evaluation-boards">
<h2>Evaluation Boards<a class="headerlink" href="#evaluation-boards" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#adi%3ESSM2603-EVALZ"><span class="xref myst">SSM2603-EVALZ</span></a></p></li>
<li><p><a class="reference internal" href="#adi%3ESSM2604-EVALZ"><span class="xref myst">SSM2604-EVALZ</span></a></p></li>
</ul>
</section>
<section id="reference-circuits">
<h2>Reference Circuits<a class="headerlink" href="#reference-circuits" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#adi%3ECN0282"><span class="xref myst">CN0282</span></a></p></li>
</ul>
</section>
<section id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Link to this heading">#</a></h2>
<section id="status">
<h3>Status<a class="headerlink" href="#status" title="Link to this heading">#</a></h3>
<table>
<thead>
<tr class="header">
<th>Source</th>
<th>Mainlined?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="git.linux.org&gt;sound/soc/codecs/ssm2602.c">git</a></td>
<td><a href="git.linux.org&gt;sound/soc/codecs/ssm2602.c">Yes</a></td>
</tr>
</tbody>
</table>
</section>
<section id="files">
<h3>Files<a class="headerlink" href="#files" title="Link to this heading">#</a></h3>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>driver</td>
<td><a href="git.linux.org&gt;sound/soc/codecs/ssm2602.c">sound/soc/codecs/ssm2602.c</a></td>
</tr>
<tr class="even">
<td>include</td>
<td><a href="git.linux.org&gt;sound/soc/codecs/ssm2602.h">sound/soc/codecs/ssm2602.h</a></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="example-device-initialization">
<h2>Example device initialization<a class="headerlink" href="#example-device-initialization" title="Link to this heading">#</a></h2>
<p>![](page&gt;software/linux/docs/platform_and_bus_model#Platform Data&amp;noheader&amp;firstseconly&amp;noeditbtn)</p>
<section id="spi">
<h3>SPI<a class="headerlink" href="#spi" title="Link to this heading">#</a></h3>
<p>SPI can be used for the SSM2602 if in SPI mode (MODE pin set to 1).</p>
<p>![](page&gt;software/linux/docs/platform_and_bus_model#Declaring SPI slave devices&amp;firstseconly&amp;noeditbtn)</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">spi_board_info</span><span class="w"> </span><span class="n">board_spi_board_info</span><span class="p">[]</span><span class="w"> </span><span class="n">__initdata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">modalias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ssm2602&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25000000</span><span class="p">,</span><span class="w">     </span><span class="cm">/* max spi clock (SCK) speed in HZ */</span>
<span class="w">        </span><span class="p">.</span><span class="n">bus_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_PF10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MAX_CTRL_CS</span><span class="p">,</span><span class="w"> </span><span class="cm">/* CS, change it for your board */</span>
<span class="w">        </span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_MODE_3</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">__init</span><span class="w"> </span><span class="nf">board_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>

<span class="w">    </span><span class="n">spi_register_board_info</span><span class="p">(</span><span class="n">board_spi_board_info</span><span class="p">,</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">board_spi_board_info</span><span class="p">));</span>

<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">arch_initcall</span><span class="p">(</span><span class="n">board_init</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="i2c">
<h3>I2C<a class="headerlink" href="#i2c" title="Link to this heading">#</a></h3>
<p>I2C can be used for the SSM2602, SSM2603, SSM2604. For the SSM2602 make sure that it is in I2C mode (MODE pin set to 0).</p>
<p>![](page&gt;software/linux/docs/platform_and_bus_model#Declaring I2C devices&amp;firstseconly&amp;noeditbtn)</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">i2c_board_info</span><span class="w"> </span><span class="n">__initdata</span><span class="w"> </span><span class="n">bfin_i2c_board_info</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ssm2604&quot;</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1b</span><span class="p">),</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>
<span class="p">}</span>

</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">__init</span><span class="w"> </span><span class="nf">stamp_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>
<span class="w">    </span><span class="n">i2c_register_board_info</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">bfin_i2c_board_info</span><span class="p">,</span>
<span class="w">                </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_i2c_board_info</span><span class="p">));</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">arch_initcall</span><span class="p">(</span><span class="n">board_init</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="asoc-dapm-widgets">
<h3>ASoC DAPM Widgets<a class="headerlink" href="#asoc-dapm-widgets" title="Link to this heading">#</a></h3>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
<th>Model</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>LOUT</td>
<td>Line Output for Left Channel</td>
<td>SSM2602, SSM2603, SSM2604</td>
</tr>
<tr class="even">
<td>ROUT</td>
<td>Line Output for Right Channel</td>
<td>SSM2602, SSM2603, SSM2604</td>
</tr>
<tr class="odd">
<td>LLINEIN</td>
<td>Line Input for Left Channel</td>
<td>SSM2602, SSM2603, SSM2604</td>
</tr>
<tr class="even">
<td>RLINEIN</td>
<td>Line Input for Right Channel</td>
<td>SSM2602, SSM2603, SSM2604</td>
</tr>
<tr class="odd">
<td>LHPOUT</td>
<td>Headphone Output for Left Channel</td>
<td>SSM2602, SSM2603</td>
</tr>
<tr class="even">
<td>RHPOUT</td>
<td>Headphone Output for Right Channel</td>
<td>SSM2602, SSM2603</td>
</tr>
<tr class="odd">
<td>MICIN</td>
<td>Microphone Input Signal</td>
<td>SSM2602, SSM2603</td>
</tr>
</tbody>
</table>
</section>
<section id="alsa-controls">
<h3>ALSA Controls<a class="headerlink" href="#alsa-controls" title="Link to this heading">#</a></h3>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
<th>Model</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Capture Volume</td>
<td>Line Input PGA Volume</td>
<td>SSM2602, SSM2603, SSM2604</td>
</tr>
<tr class="even">
<td>Capture Switch</td>
<td>Mute/Unmute Line Input signal</td>
<td>SSM2602, SSM2603, SSM2604</td>
</tr>
<tr class="odd">
<td>ADC High Pass Filter Switch</td>
<td>Enable/Disable ADC high-pass filter</td>
<td>SSM2602, SSM2603, SSM2604</td>
</tr>
<tr class="even">
<td>Store DC Offset Switch</td>
<td>Store dc offset when high-pass filter is disabled</td>
<td>SSM2602, SSM2603, SSM2604</td>
</tr>
<tr class="odd">
<td>Playback De-emphasis</td>
<td>Select playback de-emphasis. Possible values: "None", "32Khz", "44.1Khz", "48Khz"</td>
<td>SSM2602, SSM2603, SSM2604</td>
</tr>
<tr class="even">
<td>Master Playback Volume</td>
<td>Headphone volume</td>
<td>SSM2602, SSM2603</td>
</tr>
<tr class="odd">
<td>Master Playback ZC Switch</td>
<td>Enable/Disable zero cross detection for the playback volume</td>
<td>SSM2602, SSM2603</td>
</tr>
<tr class="even">
<td>Sidetone Playback Volume</td>
<td>Microphone sidetone gain control</td>
<td>SSM2602, SSM2603</td>
</tr>
<tr class="odd">
<td>Mic Boost (+20dB)</td>
<td>Primary microphone amplifier gain booster control.</td>
<td>SSM2602, SSM2603</td>
</tr>
<tr class="even">
<td>Mic Boost2 (+20dB)</td>
<td>Additional microphone amplifier gain booster control.</td>
<td>SSM2602, SSM2603</td>
</tr>
<tr class="odd">
<td>Mic Switch</td>
<td>Mute/Unmute the Microphone signal</td>
<td>SSM2602, SSM2603</td>
</tr>
<tr class="even">
<td>Output Mixer Line Bypass Switch</td>
<td>Mix Line Input signal into the output signal</td>
<td>SSM2602, SSM2603, SSM2604</td>
</tr>
<tr class="odd">
<td>Output Mixer HiFi Playback Switch</td>
<td>Mix DAC signal into the output signal</td>
<td>SSM2602, SSM2603, SSM2604</td>
</tr>
<tr class="even">
<td>Output Mixer Mic Sidetone Switch</td>
<td>Mix Microphone signal into the output signal</td>
<td>SSM2602, SSM2603</td>
</tr>
<tr class="odd">
<td>Input Select</td>
<td>Select the ADC input signal. Possible values: "Line", "Mic"</td>
<td>SSM2602, SSM2603</td>
</tr>
</tbody>
</table>
</section>
<section id="dai-configuration">
<h3>DAI configuration<a class="headerlink" href="#dai-configuration" title="Link to this heading">#</a></h3>
<p>The codec driver registers one DAI named <strong>“ssm2602-hifi”</strong>.</p>
<section id="supported-dai-formats">
<h4>Supported DAI formats<a class="headerlink" href="#supported-dai-formats" title="Link to this heading">#</a></h4>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Supported by driver</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SND_SOC_DAIFMT_I2S</td>
<td>yes</td>
<td>I2S mode</td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_RIGHT_J</td>
<td>yes</td>
<td>Right Justified mode</td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_LEFT_J</td>
<td>yes</td>
<td>Left Justified mode</td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_DSP_A</td>
<td>yes</td>
<td>data MSB after FRM LRC</td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_DSP_B</td>
<td>yes</td>
<td>data MSB during FRM LRC</td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_AC97</td>
<td>no</td>
<td>AC97 mode</td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_PDM</td>
<td>no</td>
<td>Pulse density modulation</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_NB_NF</td>
<td>yes</td>
<td>Normal bit- and frameclock</td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_NB_IF</td>
<td>yes</td>
<td>Normal bitclock, inverted frameclock</td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_IB_NF</td>
<td>yes</td>
<td>Inverted frameclock, normal bitclock</td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_IB_IF</td>
<td>yes</td>
<td>Inverted bit- and frameclock</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_CBM_CFM</td>
<td>yes</td>
<td>Codec bit- and frameclock master</td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_CBS_CFM</td>
<td>no</td>
<td>Codec bitclock slave, frameclock master</td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_CBM_CFS</td>
<td>no</td>
<td>Codec bitclock master, frameclock slave</td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_CBS_CFS</td>
<td>yes</td>
<td>Codec bit- and frameclock slave</td>
</tr>
</tbody>
</table>
</section>
<section id="supported-sysclk-rates">
<h4>Supported SYSCLK rates<a class="headerlink" href="#supported-sysclk-rates" title="Link to this heading">#</a></h4>
<p>The codecs system clock can be configured for various input rates. When configuring the codec system clock use SSM2602_SYSCLK for the clock id.</p>
<p>The following list contains the supported system clock rates and their resulting sample-rates.</p>
<table>
<thead>
<tr class="header">
<th>SYSCLK</th>
<th>Supported sample-rates</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>11289600</td>
<td>8kHz, 44.1kHz 88.2kHz</td>
</tr>
<tr class="even">
<td>12000000</td>
<td>8kHz, 32kHz, 44.1kHz 48kHz, 88.2kHz, 96kHz</td>
</tr>
<tr class="odd">
<td>12288000</td>
<td>8kHz, 32kHz, 48kHz, 96kHz</td>
</tr>
<tr class="even">
<td>16934400</td>
<td>8kHz, 44.1kHz, 88.2kHz</td>
</tr>
<tr class="odd">
<td>18432000</td>
<td>8kHz, 32kHz, 48kHz, 96kHz</td>
</tr>
</tbody>
</table>
</section>
<section id="example-dai-configuration">
<h4>Example DAI configuration<a class="headerlink" href="#example-dai-configuration" title="Link to this heading">#</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_card</span><span class="w"> </span><span class="n">bf5xx_ssm2602</span><span class="p">;</span>

<span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">bf5xx_ssm2602_hw_params</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_pcm_substream</span><span class="w"> </span><span class="o">*</span><span class="n">substream</span><span class="p">,</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_pcm_hw_params</span><span class="w"> </span><span class="o">*</span><span class="n">params</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_pcm_runtime</span><span class="w"> </span><span class="o">*</span><span class="n">rtd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">substream</span><span class="o">-&gt;</span><span class="n">private_data</span><span class="p">;</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_dai</span><span class="w"> </span><span class="o">*</span><span class="n">codec_dai</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rtd</span><span class="o">-&gt;</span><span class="n">codec_dai</span><span class="p">;</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_dai</span><span class="w"> </span><span class="o">*</span><span class="n">cpu_dai</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rtd</span><span class="o">-&gt;</span><span class="n">cpu_dai</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>

<span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">snd_soc_dai_set_fmt</span><span class="p">(</span><span class="n">cpu_dai</span><span class="p">,</span><span class="w"> </span><span class="n">SND_SOC_DAIFMT_I2S</span><span class="w"> </span><span class="o">|</span>
<span class="w">        </span><span class="n">SND_SOC_DAIFMT_NB_NF</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SND_SOC_DAIFMT_CBM_CFM</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>

<span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">snd_soc_dai_set_fmt</span><span class="p">(</span><span class="n">codec_dai</span><span class="p">,</span><span class="w"> </span><span class="n">SND_SOC_DAIFMT_I2S</span><span class="w"> </span><span class="o">|</span>
<span class="w">        </span><span class="n">SND_SOC_DAIFMT_NB_NF</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SND_SOC_DAIFMT_CBM_CFM</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>

<span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">snd_soc_dai_set_sysclk</span><span class="p">(</span><span class="n">codec_dai</span><span class="p">,</span><span class="w"> </span><span class="n">SSM2602_SYSCLK</span><span class="p">,</span><span class="w"> </span><span class="mi">12000000</span><span class="p">,</span>
<span class="w">        </span><span class="n">SND_SOC_CLOCK_IN</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_ops</span><span class="w"> </span><span class="n">bf5xx_ssm2602_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">hw_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bf5xx_ssm2602_hw_params</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_dai_link</span><span class="w"> </span><span class="n">bf5xx_ssm2602_dai_link</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ssm2602&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">stream_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SSM2602&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">cpu_dai_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;bfin-i2s.0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">codec_dai_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ssm2602-hifi&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;bfin-i2s-pcm-audio&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">codec_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ssm2602.0-001b&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bf5xx_ssm2602_ops</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="ssm2604-evaluation-board-driver">
<h2>SSM2604 evaluation board driver<a class="headerlink" href="#ssm2604-evaluation-board-driver" title="Link to this heading">#</a></h2>
<section id="source">
<h3>Source<a class="headerlink" href="#source" title="Link to this heading">#</a></h3>
<section id="id1">
<h4>Status<a class="headerlink" href="#id1" title="Link to this heading">#</a></h4>
<table>
<thead>
<tr class="header">
<th>Source</th>
<th>Mainlined?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="bfgit&gt;linux-kernel?sound/soc/blackfin/bf5xx-ssm2602.c">git</a></td>
<td><a href="git.linux.org&gt;sound/soc/blackfin/bf5xx-ssm2602.c">Yes</a></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="as-a-module">
<h3>As a Module<a class="headerlink" href="#as-a-module" title="Link to this heading">#</a></h3>
<p>To add support for the built-in codec SSM2602 of BF52xC to the kernel build system, a few things must be enabled properly for things to work. The configuration is as following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Linux Kernel Configuration
  Device Drivers  ---&gt; 
      &lt;M&gt; Sound card support ---&gt;
        &lt;M&gt; Advanced Linux Sound Architecture  ---&gt;
          &lt; &gt; Sequencer support
          &lt;M&gt; OSS Mixer API 
          &lt;M&gt; OSS PCM (digital audio) API
          &lt;M&gt; ALSA for SoC audio support  ---&gt;
            &lt;M&gt; SoC I2S Audio for the ADI BF5xx chip 
              &lt;M&gt; SoC SSM2602 Audio support for BF52x ezkit
            &lt; &gt; SoC AC97 Audio support for BF5xx 
            (0) Set a SPORT for Sound chip
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: important="" -->
<p>I2C bus is used to configure the codec. So, if the audio driver is built into kernel, the I2c driver is also built into kernel automatically. But if the audio driver is built as module, then make sure that the I2C driver is loaded before the audio module.</p>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Linux Kernel Configuration
  Device Drivers  ---&gt;
    &lt;*&gt; I2C support  ---&gt;
      --- I2C support
          I2C Hardware Bus Support ---&gt;
            &lt;*&gt; Blackfin TWI I2C support  
</pre></div>
</div>
<p>Doing this will create modules (outside the kernel). The modules will be inserted automatically when it is needed. You can also build sound driver into kernel.</p>
</section>
<section id="testing-the-built-in-kernel-driver">
<h3>Testing the built in kernel driver<a class="headerlink" href="#testing-the-built-in-kernel-driver" title="Link to this heading">#</a></h3>
<p>If audio is configured as modules, skip this section. If audio is built into kernel and you have booted the kernel, there are a few things to check to ensure audio is working:</p>
<ol class="arabic simple">
<li><p>Check the boot messages to see if you have booted the correct kernel. During kernel boot, it should print out:
Advanced Linux Sound Architecture Driver Version 1.0.12rc1 (Thu Jun 22 13:55:50 2006 UTC).
ASoC version 0.13.1
dma rx:3 tx:4, err irq:15, regs:ffc00800
ssm2602 Audio Codec 0.1&lt;6&gt;dma_alloc_init: dma_page &#64; 0x03011000 - 512 pages at 0x03e00000
asoc: SSM2602 &lt;-&gt; bf5xx-i2s-0 mapping ok
ALSA device list:
#0: bf5xx_ssm2602 (SSM2602)</p></li>
</ol>
</section>
<section id="testing-the-audio-module">
<h3>Testing the audio module<a class="headerlink" href="#testing-the-audio-module" title="Link to this heading">#</a></h3>
<div class="highlight-bashroot:~&gt; notranslate"><div class="highlight"><pre><span></span>root:~&gt; **modprobe snd-pcm-oss**
root:~&gt; **lsmod**
Module Size Used by
snd_pcm_oss 31968 0
snd_mixer_oss 11360 1 snd_pcm_oss
snd_ssm2602 1412 0
snd_soc_ssm2602 8528 1 snd_ssm2602
snd_soc_bf5xx 2784 1 snd_ssm2602
snd_soc_bf5xx_i2s 10916 2 snd_ssm2602,snd_soc_bf5xx
snd_soc_core 17120 3 snd_ssm2602,snd_soc_ssm2602,snd_soc_bf5xx
snd_pcm 48356 3 snd_pcm_oss,snd_soc_bf5xx,snd_soc_core
snd_page_alloc 4232 1 snd_pcm
snd_timer 13796 1 snd_pcm
snd 31092 6 snd_pcm_oss,snd_mixer_oss,snd_soc_ssm2602,snd_soc_core,snd_pcm,snd_timer
soundcore 3940 1 snd

root:~&gt; **tone**
TONE: generating sine wave at 1000 Hz...
</pre></div>
</div>
</section>
<section id="testing-audio">
<h3>Testing Audio<a class="headerlink" href="#testing-audio" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Check the output ```bashroot:~&gt; <strong>tone</strong></p></li>
</ol>
<p>TONE: generating sine wave at 1000 Hz…</p>
<div class="highlight-You notranslate"><div class="highlight"><pre><span></span>
1.  Set the audio mixer to Mic (the default is Line, assuming you have built ALSA utils): ```bashroot:/&gt; **amixer sset &#39;Input Mux&#39; &#39;Mic&#39;**

Simple mixer control &#39;Input Mux&#39;,0

    Capabilities: enum
    Items: &#39;Line&#39; &#39;Mic&#39;
    Item0: &#39;Mic&#39;``` Also you can run &quot;alsamixer&quot; to get graphic configuration interface, OSS-based &quot;mixer&quot; can work too.
    - Check to make sure mp3s work (assuming you have built mp3play),
      - The first step is to download a mp3 file onto the platform. The &#39;&#39;wget&#39;&#39; command assumes that networking is properly configured (you have an IP number, the default gateway is set, and DNS servers can be accessed), and working. ```bashroot:/&gt; **cd /var**

root:/var&gt; **wget &lt;http://www.radiocrazy.com/shows/A/AbbottCostello/ABCOWhosOnFirstclip.mp3&gt;**
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  - Next, play it with mp3play: ```bashroot:/var&gt; **mp3play ABCOWhosOnFirstclip.mp3**```
- You can play it in one step with: ```bashroot:~&gt; **mp3play http://www.radiocrazy.com/shows/A/AbbottCostello/ABCOWhosOnFirstclip.mp3**
</pre></div>
</div>
<p><a class="reference external" href="http://www.radiocrazy.com/shows/A/AbbottCostello/ABCOWhosOnFirstclip.mp3:">http://www.radiocrazy.com/shows/A/AbbottCostello/ABCOWhosOnFirstclip.mp3:</a> MPEG2-III (0 ms)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
1.  Optionally check to make sure the Line and headphone are working properly: ```bashroot:/&gt; **amixer sset &#39;Input Mux&#39; &#39;Line&#39;**

Simple mixer control &#39;Input Mux&#39;,0

    Capabilities: enum
    Items: &#39;Line&#39; &#39;Mic&#39;
    Item0: &#39;Line&#39;

root:~&gt; **arecord -d 10 test.wav**
Recording WAVE &quot;test.wav&quot; : Unsigned 8 bit, Rate 8000 Hz, Mono
root:~&gt; **aplay test.wav**
``` This should record 10 seconds of whatever is on the Line, and then play it back over the output.

1.  You should also be able to do a &quot;talkthrough&quot;, and hear on the speakers anything you put on the line. ```bashroot:~&gt; **arecord | aplay**```
</pre></div>
</div>
</section>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="adav801.html" title="Previous document" class="prev">ADAV80X Sound CODEC Linux Driver</a>
    <a href="ssm4567.html" title="Next document" class="next">SSM4567 Audio Amplifier Linux Driver</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>

  
  <form action="" method="get" class="search-area">
    <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
    <button value="search"></button>
    <span id="search-progress"></span>
  </form>
  
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>