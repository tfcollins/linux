<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ADAU1977 Sound CODEC Linux Driver &#8212; Linux Kernel: Variant from Analog Devices, Inc. v6.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.min.css?v=cf8483f0" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <script src="../../../_static/documentation_options.js?v=cb43cce9"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/tabs.js?v=3ee01567"></script>
    <script defer="" src="../../../_static/app.umd.js?v=96350458"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="ADAU7002 Stereo PDM to I2S or TDM Conversion IC Linux Driver" href="adau7002.html" />
    <link rel="prev" title="ADAU1701 Sound Audio System Linux Driver" href="adau1701.html" />
   
  
    <meta name="robots" content="noindex">
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <header>
    <div class="header">
      <div id="left">
        <label id="show-sidebar" for="input-show-toc" title="Show/hide index"></label>
      </div>
      <div id="right">
        <span>
          <a id="logo-org" href="https://analog.com"></a>
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a>
        </span>
        <span class="reverse">
          <label id="show-localtoc" for="input-show-localtoc" title="Show/hide contents"></label>
        </span>
      </div>
    </div>
    <div class="repotoc-tree">
      <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

    </div>
  </header>

    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">ADAU1977 Sound CODEC Linux Driver</a><ul>
<li><a class="reference internal" href="#supported-devices">Supported Devices</a></li>
<li><a class="reference internal" href="#evaluation-boards">Evaluation Boards</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a><ul>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#files">Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-device-initialization">Example device initialization</a><ul>
<li><a class="reference internal" href="#voltage-supplies">Voltage Supplies</a></li>
<li><a class="reference internal" href="#devicetree-bindings">Devicetree bindings</a></li>
<li><a class="reference internal" href="#i2c">I2C</a><ul>
<li><a class="reference internal" href="#devicetree">Devicetree</a></li>
</ul>
</li>
<li><a class="reference internal" href="#spi">SPI</a><ul>
<li><a class="reference internal" href="#id1">Devicetree</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#asoc-dapm-widgets">ASoC DAPM Widgets</a></li>
<li><a class="reference internal" href="#alsa-controls">ALSA Controls</a></li>
<li><a class="reference internal" href="#dai-configuration">DAI configuration</a><ul>
<li><a class="reference internal" href="#supported-dai-formats">Supported DAI formats</a></li>
<li><a class="reference internal" href="#system-clock-configuration">System clock configuration</a></li>
<li><a class="reference internal" href="#tdm-configuration">TDM configuration</a></li>
<li><a class="reference internal" href="#example-machine-driver-configuration">Example machine driver configuration</a><ul>
<li><a class="reference internal" href="#fixed-mclk">Fixed MCLK</a></li>
<li><a class="reference internal" href="#configurable-mclk">Configurable MCLK</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="../../../drivers_index.html">Linux Drivers</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../multifunction-device/adp5520.html">ADP5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8860.html">ADP8860</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8870.html">ADP8870</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clk/adi/clk-ad9545.c.html">AD9545</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5588.html">ADP5587</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5589.html">ADP5585</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/axi_fan_control.html">Fan Control IP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/ltc2947.html">LTC2947</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin1100.html">ADIN1100</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin.html">ADIN1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/adin1110.html">ADIN1110</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/adin2111.html">ADIN2111</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/open_alliance.html">Open Alliance - 10BASE-T1x MAC-PHY Serial Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl313.html">ADXL312,</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl345.html">ADXL345</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl355.html">ADXL355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl362.html">ADXL362</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl367.html">ADXL367</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl372.html">ADXL372</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16201.html">ADIS16201</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16203.html">ADIS16203</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16209.html">ADIS16209</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16240.html">ADIS16240</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/ad8366.html">AD8366</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/ada4250.html">ADA4250</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/hmc425a.html">HMC425</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad400x.html">AD4003</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad4630.html">AD4030-24</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad9208.html">AD6684</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7476a.html">AD7091</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7091r5.html">AD7091R-5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7091r8.html">AD7091R-8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7124.html">AD7124</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7780.html">AD7170</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7192.html">AD7190</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7266.html">AD7265</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7280a.html">AD7280A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7291.html">AD7291</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7298.html">AD7298</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad738x.html">AD7380</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7606.html">AD7605-4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7766.html">AD7766-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7768-1.html">AD7768-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7768.html">AD7768</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7793.html">AD7785</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7791.html">AD7787</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7887.html">AD7887</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7998.html">AD7991</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad9083.html">AD9083</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-mxfe/ad9081.html">AD9207</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../resources/tools-software/linux-drivers/iio-adc/ad9208.html">AD9208</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/axi-adc-hdl.html">AD9234</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/adaq8092.html">ADAQ8092</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/adas1000.html">ADAS1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adar1000.html">ADAR1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7152.html">AD7152</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7150.html">AD7150</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7745.html">AD7745</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-addac/ad74413r.html">AD74412R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/axi-ad3552r.html">AD3552R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5064.html">AD5024</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5446.html">AD5300</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5676.html">AD5310R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5360.html">AD5360</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5380.html">AD5380</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5449.html">AD5415</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5421.html">AD5421</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5504.html">AD5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5592r.html">AD5592R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5593r.html">AD5593R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5624r.html">AD5624</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5755.html">AD5735</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5764.html">AD5744</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5758.html">AD5758</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5791.html">AD5760</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5770r.html">AD5770R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/axi-dac-dds-hdl.html">AD9122</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ltc2664.html">LTC2664</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/ad9832.html">AD9832</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/ad9834.html">AD9833</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-filter/admv8818.html">ADMV8818</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9162.html">AD9161</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9508.html">AD9508</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9517.html">AD9516-0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9523.html">AD9523-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9528.html">AD9528</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4159.html">ADF4159</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4350.html">ADF4350</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4360.html">ADF4360-0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4371.html">ADF4371</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4377.html">ADF4377</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf5355.html">ADF4355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/admv1013.html">ADMV1013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/admv1014.html">ADMV1014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adrf6780.html">ADRF6780</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/hmc7044.html">HMC7044</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ltc6952.html">LTC6952</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16060.html">ADIS16060</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16080.html">ADIS16080</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16130.html">ADIS16130</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16136.html">ADIS16133</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16260.html">ADIS16251</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adxrs450.html">ADXRS450</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-impedance-analyzer/ad5933.html">AD5933</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16400.html">ADIS16300</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16480.html">ADIS16375</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16475.html">ADIS16460</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s90.html">AD2S90</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s1200.html">AD2S1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s1210.html">AD2S1210</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad6676.html">AD6676</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/ad9361.html">AD9361</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/ad9371.html">AD9371</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adrv9002.html">ADRV9002</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adrv9009.html">ADRV9008-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-temperature/ltc2983.html">LTC2983</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-vector-power/adl5960.html">ADL5960</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/ad714x.html">AD7142</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7873.html">AD7873</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7877.html">AD7877</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7879.html">AD7879</a></li>
<li class="toctree-l2"><a class="reference internal" href="../leds/adp1650.html">ADP1650</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/dpot.html">AD5160</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mux/adgs1408.html">ADGS1408</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking-mac802154/adf7242.html">ADF7241</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator/adp150.html">ADP122</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator/ad5398.html">AD5398</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial/max310x.html">MAX3107</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad1835a.html">AD1835A</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad1936.html">AD1933</a></li>
<li class="toctree-l2"><a class="reference internal" href="ad73322.html">AD73311</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau1361.html">ADAU1361</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau1372.html">ADAU1372</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau1373.html">ADAU1373</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau1381.html">ADAU1381</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau1701.html">ADAU1401A</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ADAU1977</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau7002.html">ADAU7002</a></li>
<li class="toctree-l2"><a class="reference internal" href="adau7118.html">ADAU7118</a></li>
<li class="toctree-l2"><a class="reference internal" href="adav801.html">ADAV801</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssm2602.html">SSM2602</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssm4567.html">SSM4567</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drm/adv7511.html">ADV7511</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build.html">Building Kernels</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="adau1977-sound-codec-linux-driver">
<h1>ADAU1977 Sound CODEC Linux Driver<a class="headerlink" href="#adau1977-sound-codec-linux-driver" title="Link to this heading">¶</a></h1>
<section id="supported-devices">
<h2>Supported Devices<a class="headerlink" href="#supported-devices" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://analog.com/ADAU1977">ADAU1977</a></p></li>
<li><p><a class="reference external" href="https://analog.com/ADAU1978">ADAU1978</a></p></li>
<li><p><a class="reference external" href="https://analog.com/ADAU1979">ADAU1979</a></p></li>
</ul>
</section>
<section id="evaluation-boards">
<h2>Evaluation Boards<a class="headerlink" href="#evaluation-boards" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://analog.com/EVAL-ADAU1977Z">EVAL-ADAU1977Z</a></p></li>
</ul>
</section>
<section id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Link to this heading">¶</a></h2>
<section id="status">
<h3>Status<a class="headerlink" href="#status" title="Link to this heading">¶</a></h3>
<table>
<thead>
<tr class="header">
<th>Source</th>
<th>Mainlined?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="git.linux.org&gt;sound/soc/codecs/adau1977.c">git</a></td>
<td><a href="git.linux.org&gt;sound/soc/codecs/adau1977.c">Yes</a></td>
</tr>
</tbody>
</table>
</section>
<section id="files">
<h3>Files<a class="headerlink" href="#files" title="Link to this heading">¶</a></h3>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>driver</td>
<td><a href="git.linux.org&gt;sound/soc/codecs/adau1977.c">sound/soc/codecs/adau1977.c</a></td>
</tr>
<tr class="even">
<td>driver</td>
<td><a href="git.linux.org&gt;sound/soc/codecs/adau1977-spi.c">sound/soc/codecs/adau1977-spi.c</a></td>
</tr>
<tr class="odd">
<td>driver</td>
<td><a href="git.linux.org&gt;sound/soc/codecs/adau1977-i2c.c">sound/soc/codecs/adau1977-i2c.c</a></td>
</tr>
<tr class="even">
<td>include</td>
<td><a href="git.linux.org&gt;sound/soc/codecs/adau1977.h">sound/soc/codecs/adau1977.h</a></td>
</tr>
<tr class="odd">
<td>platform data</td>
<td><a href="git.linux.org&gt;include/linux/platform_data/adau1977.h">include/linux/platform_data/adau1977.h</a></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="example-device-initialization">
<h2>Example device initialization<a class="headerlink" href="#example-device-initialization" title="Link to this heading">¶</a></h2>
<!-- CMDS: noheader firstseconly noeditbtn -->
<p>The platform data for the ADAU1977 allow to specify the MICBIAS pin voltage. If no platform data is specified (i.e. set to NULL) the default voltage of 8.5 V will be used.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * enum adau1977_micbias - ADAU1977 MICBIAS pin voltage setting</span>
<span class="cm"> * @ADAU1977_MICBIAS_5V0: MICBIAS is set to 5.0 V</span>
<span class="cm"> * @ADAU1977_MICBIAS_5V5: MICBIAS is set to 5.5 V</span>
<span class="cm"> * @ADAU1977_MICBIAS_6V0: MICBIAS is set to 6.0 V</span>
<span class="cm"> * @ADAU1977_MICBIAS_6V5: MICBIAS is set to 6.5 V</span>
<span class="cm"> * @ADAU1977_MICBIAS_7V0: MICBIAS is set to 7.0 V</span>
<span class="cm"> * @ADAU1977_MICBIAS_7V5: MICBIAS is set to 7.5 V</span>
<span class="cm"> * @ADAU1977_MICBIAS_8V0: MICBIAS is set to 8.0 V</span>
<span class="cm"> * @ADAU1977_MICBIAS_8V5: MICBIAS is set to 8.5 V</span>
<span class="cm"> * @ADAU1977_MICBIAS_9V0: MICBIAS is set to 9.0 V</span>
<span class="cm"> */</span>
<span class="k">enum</span><span class="w"> </span><span class="n">adau1977_micbias</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ADAU1977_MICBIAS_5V0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">,</span>
<span class="w">    </span><span class="n">ADAU1977_MICBIAS_5V5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1</span><span class="p">,</span>
<span class="w">    </span><span class="n">ADAU1977_MICBIAS_6V0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x2</span><span class="p">,</span>
<span class="w">    </span><span class="n">ADAU1977_MICBIAS_6V5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x3</span><span class="p">,</span>
<span class="w">    </span><span class="n">ADAU1977_MICBIAS_7V0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x4</span><span class="p">,</span>
<span class="w">    </span><span class="n">ADAU1977_MICBIAS_7V5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x5</span><span class="p">,</span>
<span class="w">    </span><span class="n">ADAU1977_MICBIAS_8V0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x6</span><span class="p">,</span>
<span class="w">    </span><span class="n">ADAU1977_MICBIAS_8V5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x7</span><span class="p">,</span>
<span class="w">    </span><span class="n">ADAU1977_MICBIAS_9V0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x8</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct adau1977_platform_data - Platform configuration data for the ADAU1977</span>
<span class="cm"> * @micbias: Specifies the voltage for the MICBIAS pin</span>
<span class="cm"> */</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">adau1977_platform_data</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">enum</span><span class="w"> </span><span class="n">adau1977_micbias</span><span class="w"> </span><span class="n">micbias</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<section id="voltage-supplies">
<h3>Voltage Supplies<a class="headerlink" href="#voltage-supplies" title="Link to this heading">¶</a></h3>
<p>The ADAU1977 driver expects a regulator supply for the AVDD voltage to be specified. This allows the driver to disable the supply when not needed, which helps to conserve power. Additionally the driver optionally accepts a supply for the DVDD voltage. If a supply for the DVDD voltage is specified the driver will use that regulator and disable the internal LDO.</p>
<p>When using machine board files to register the device the regulators can be specified in the board file.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">regulator_consumer_supply</span><span class="w"> </span><span class="n">adau1977_avdd_consumer_supplies</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">REGULATOR_SUPPLY</span><span class="p">(</span><span class="s">&quot;AVDD&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spi0.1&quot;</span><span class="p">),</span>
<span class="p">};</span>
<span class="w"> </span>
<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">regulator_init_data</span><span class="w"> </span><span class="n">adau1977_avdd_reg_init_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">constraints</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;3V3&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">valid_ops_mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">REGULATOR_CHANGE_STATUS</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">.</span><span class="n">consumer_supplies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adau1977_avdd_consumer_supplies</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">num_consumer_supplies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">adau1977_avdd_consumer_supplies</span><span class="p">),</span>
<span class="p">};</span>
<span class="w"> </span>
<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">fixed_voltage_config</span><span class="w"> </span><span class="n">adau1977_avdd_pdata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">supply_name</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;board-3V3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">microvolts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3300000</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">gpio</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">EINVAL</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">enabled_at_boot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">init_data</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adau1977_avdd_reg_init_data</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">platform_device</span><span class="w"> </span><span class="n">adau1977_avdd_voltage_regulator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;reg-fixed-voltage&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">id</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">dev</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_data</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adau1977_avdd_pdata</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Optional */</span>
<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">regulator_consumer_supply</span><span class="w"> </span><span class="n">adau1977_dvdd_consumer_supplies</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">REGULATOR_SUPPLY</span><span class="p">(</span><span class="s">&quot;DVDD&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spi0.1&quot;</span><span class="p">),</span>
<span class="p">};</span>
<span class="w"> </span>
<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">regulator_init_data</span><span class="w"> </span><span class="n">adau1977_dvdd_reg_init_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">constraints</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1V8&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">valid_ops_mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">REGULATOR_CHANGE_STATUS</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">.</span><span class="n">consumer_supplies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adau1977_dvdd_consumer_supplies</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">num_consumer_supplies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">adau1977_dvdd_consumer_supplies</span><span class="p">),</span>
<span class="p">};</span>
<span class="w"> </span>
<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">fixed_voltage_config</span><span class="w"> </span><span class="n">adau1977_dvdd_pdata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">supply_name</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;board-1V8&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">microvolts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1800000</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">gpio</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">EINVAL</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">enabled_at_boot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">init_data</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adau1977_dvdd_reg_init_data</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">platform_device</span><span class="w"> </span><span class="n">adau1977_dvdd_voltage_regulator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;reg-fixed-voltage&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">id</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">dev</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_data</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adau1977_dvdd_pdata</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">};</span>
</pre></div>
</div>
<p>When using devicetree the regulators should be specified in the devicetree. For more on how to specify the regulators using devicetree see the <a class="reference external" href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/devicetree/bindings/regulator/regulator.txt">regulator devicetree bindings documentation</a> and the devicetree examples below in the SPI and I2C sections.</p>
</section>
<section id="devicetree-bindings">
<h3>Devicetree bindings<a class="headerlink" href="#devicetree-bindings" title="Link to this heading">¶</a></h3>
<p>The ADAU1977 driver is fully devicetree compatible. Depending on the bus type the device is connected to different properties must/can be specified.</p>
<p><strong>Shared required properties:</strong></p>
<ul class="simple">
<li><p><strong>compatible</strong>: Must be “adi,adau1977”, “adi,adau1978” or adi,adau1979”</p></li>
<li><p><strong>AVDD-supply</strong>: A handle to the power supply connected to the AVDD pin</p></li>
</ul>
<p><strong>Shared optional properties:</strong></p>
<ul class="simple">
<li><p><strong>DVDD-supply</strong>: A handle to the power supply connected to the DVDD pin. If specified the internal LDO will be disabled.</p></li>
<li><p><strong>reset-gpios</strong>: GPIO chip handle and specifier that define which GPIO is connected to the chips PD/RST pin. If not specified the reset pin is assumed to be hardwired to VCC.</p></li>
<li><p><strong>adi,micbias</strong>: Configures the voltage setting for the MICBIAS pin. If not specified the default value will be 8.5 Volts. This property is only valid for the ADAU1977. Valid values for this property are:</p>
<ul>
<li><p>0: 5.0V</p></li>
<li><p>1: 5.5V</p></li>
<li><p>2: 6.0V</p></li>
<li><p>3: 6.5V</p></li>
<li><p>4: 7.0V</p></li>
<li><p>5: 7.5V</p></li>
<li><p>6: 8.0V</p></li>
<li><p>7: 8.5V</p></li>
<li><p>8: 9.0V</p></li>
</ul>
</li>
</ul>
<p><strong>I2C required properties</strong>:</p>
<ul class="simple">
<li><p><strong>reg</strong>: The I2C address of the chip</p></li>
</ul>
<p><strong>SPI required properties</strong>:</p>
<ul class="simple">
<li><p><strong>reg</strong>: The SPI chipselect signal of the SPI master associated with this chip</p></li>
<li><p><strong>spi-max-frequency</strong>: Maximum spi frequency to use.</p></li>
</ul>
</section>
<section id="i2c">
<h3>I2C<a class="headerlink" href="#i2c" title="Link to this heading">¶</a></h3>
<!-- CMDS: firstseconly noeditbtn -->
<p>The I2C device id depends on the ADDR0 and ADDR1 pin settings and needs to be set according to your board setup.</p>
<table>
<thead>
<tr class="header">
<th>ADDR1</th>
<th>ADDR0</th>
<th>I2C device id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>0x11</td>
</tr>
<tr class="even">
<td>0</td>
<td>1</td>
<td>0x31</td>
</tr>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>0x51</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>0x71</td>
</tr>
</tbody>
</table>
<p>In this example we assume ADDR0=0 and ADDR1=0.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">adau1977_platform_data</span><span class="w"> </span><span class="n">adau1977_pdata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">micbias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADAU1977_MICBIAS_6V5</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">i2c_board_info</span><span class="w"> </span><span class="n">__initdata</span><span class="w"> </span><span class="n">bfin_i2c_board_info</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adau1977&quot;</span><span class="p">,</span><span class="w"> </span><span class="mh">0x11</span><span class="p">),</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adau1977_pdata</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>
<span class="p">}</span>

</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">__init</span><span class="w"> </span><span class="nf">stamp_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>
<span class="w">    </span><span class="n">i2c_register_board_info</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">bfin_i2c_board_info</span><span class="p">,</span>
<span class="w">                </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_i2c_board_info</span><span class="p">));</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">arch_initcall</span><span class="p">(</span><span class="n">board_init</span><span class="p">);</span>
</pre></div>
</div>
<section id="devicetree">
<h4>Devicetree<a class="headerlink" href="#devicetree" title="Link to this heading">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>codec_supply: fixedregulator@0 {
    compatible = &quot;regulator-fixed&quot;;
    regulator-name = &quot;AVDD&quot;;
    regulator-min-microvolt = &lt;3300000&gt;;
    regulator-max-microvolt = &lt;3300000&gt;;
};

i2c@41600000 {
    compatible = &quot;...;
    ...

    #size-cells = &lt;0&gt;;
    #address-cells = &lt;1&gt;;
            
    adau1977: codec@11 {
        compatible = &quot;adi,adau1977&quot;;
        reg = &lt;0x11&gt;;
        reset-gpios = &lt;&amp;gpio 5 0&gt;;
        AVDD-supply = &lt;&amp;codec_supply&gt;;
    };
};
</pre></div>
</div>
</section>
</section>
<section id="spi">
<h3>SPI<a class="headerlink" href="#spi" title="Link to this heading">¶</a></h3>
<!-- CMDS: firstseconly noeditbtn -->
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">adau1977_platform_data</span><span class="w"> </span><span class="n">adau1977_pdata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">micbias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADAU1977_MICBIAS_7V5</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">spi_board_info</span><span class="w"> </span><span class="n">board_spi_board_info</span><span class="p">[]</span><span class="w"> </span><span class="n">__initdata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">modalias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adau1977&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10000000</span><span class="p">,</span><span class="w">     </span><span class="cm">/* max spi clock (SCK) speed in HZ */</span>
<span class="w">        </span><span class="p">.</span><span class="n">bus_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GPIO_PF10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MAX_CTRL_CS</span><span class="p">,</span><span class="w"> </span><span class="cm">/* CS, change it for your board */</span>
<span class="w">        </span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_MODE_0</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">adau1977_pdata</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">__init</span><span class="w"> </span><span class="nf">board_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>

<span class="w">    </span><span class="n">spi_register_board_info</span><span class="p">(</span><span class="n">board_spi_board_info</span><span class="p">,</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">board_spi_board_info</span><span class="p">));</span>

<span class="w">    </span><span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">arch_initcall</span><span class="p">(</span><span class="n">board_init</span><span class="p">);</span>
</pre></div>
</div>
<section id="id1">
<h4>Devicetree<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>codec_supply: fixedregulator@0 {
    compatible = &quot;regulator-fixed&quot;;
    regulator-name = &quot;AVDD&quot;;
    regulator-min-microvolt = &lt;3300000&gt;;
    regulator-max-microvolt = &lt;3300000&gt;;
};

spi@41600000 {
    compatible = &quot;...;
    ...

    #size-cells = &lt;0&gt;;
    #address-cells = &lt;1&gt;;
            
    adau1977: codec@1 {
        compatible = &quot;adi,adau1977&quot;;
        reg = &lt;0x1&gt;;
        spi-max-frequency = &lt;10000000&gt;;
        reset-gpios = &lt;&amp;gpio 5 0&gt;;
        AVDD-supply = &lt;&amp;codec_supply&gt;;
        adi,micbias = &lt;5&gt;;
    };
};
</pre></div>
</div>
</section>
</section>
</section>
<section id="asoc-dapm-widgets">
<h2>ASoC DAPM Widgets<a class="headerlink" href="#asoc-dapm-widgets" title="Link to this heading">¶</a></h2>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
<th>Configuration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AIN1</td>
<td>Analog Input Channel 1</td>
<td></td>
</tr>
<tr class="even">
<td>AIN2</td>
<td>Analog Input Channel 2</td>
<td></td>
</tr>
<tr class="odd">
<td>AIN3</td>
<td>Analog Input Channel 3</td>
<td></td>
</tr>
<tr class="even">
<td>AIN4</td>
<td>Analog Input Channel 4</td>
<td></td>
</tr>
<tr class="odd">
<td>VREF</td>
<td>Reference Voltage</td>
<td></td>
</tr>
<tr class="even">
<td>MICBIAS</td>
<td>Microphone Bias Output</td>
<td>ADAU1977 only</td>
</tr>
</tbody>
</table>
</section>
<section id="alsa-controls">
<h2>ALSA Controls<a class="headerlink" href="#alsa-controls" title="Link to this heading">¶</a></h2>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ADC1 Capture Volume</td>
<td>Post ADC gain for channel 1</td>
</tr>
<tr class="even">
<td>ADC2 Capture Volume</td>
<td>Post ADC gain for channel 2</td>
</tr>
<tr class="odd">
<td>ADC3 Capture Volume</td>
<td>Post ADC gain for channel 3</td>
</tr>
<tr class="even">
<td>ADC4 Capture Volume</td>
<td>Post ADC gain for channel 4</td>
</tr>
<tr class="odd">
<td>ADC1 Highpass-Filter Capture Switch</td>
<td>Enables/disables the highpass-filter for channel 1</td>
</tr>
<tr class="even">
<td>ADC2 Highpass-Filter Capture Switch</td>
<td>Enables/disables the highpass-filter for channel 2</td>
</tr>
<tr class="odd">
<td>ADC3 Highpass-Filter Capture Switch</td>
<td>Enables/disables the highpass-filter for channel 3</td>
</tr>
<tr class="even">
<td>ADC4 Highpass-Filter Capture Switch</td>
<td>Enables/disables the highpass-filter for channel 4</td>
</tr>
<tr class="odd">
<td>ADC1 DC Substraction Capture Switch</td>
<td>Enables/disables DC offset subtraction for channel 1</td>
</tr>
<tr class="even">
<td>ADC2 DC Substraction Capture Switch</td>
<td>Enables/disables DC offset subtraction for channel 2</td>
</tr>
<tr class="odd">
<td>ADC3 DC Substraction Capture Switch</td>
<td>Enables/disables DC offset subtraction for channel 3</td>
</tr>
<tr class="even">
<td>ADC4 DC Substraction Capture Switch</td>
<td>Enables/disables DC offset subtraction for channel 4</td>
</tr>
</tbody>
</table>
</section>
<section id="dai-configuration">
<h2>DAI configuration<a class="headerlink" href="#dai-configuration" title="Link to this heading">¶</a></h2>
<p>The codec driver registers one DAI: <strong>adau1977-hifi</strong></p>
<section id="supported-dai-formats">
<h3>Supported DAI formats<a class="headerlink" href="#supported-dai-formats" title="Link to this heading">¶</a></h3>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Supported by driver</th>
<th>Description</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SND_SOC_DAIFMT_I2S</td>
<td>yes</td>
<td>I2S mode</td>
<td></td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_RIGHT_J</td>
<td>yes</td>
<td>Right Justified mode</td>
<td></td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_LEFT_J</td>
<td>yes</td>
<td>Left Justified mode</td>
<td></td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_DSP_A</td>
<td>yes</td>
<td>data MSB after FRM LRC</td>
<td></td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_DSP_B</td>
<td>yes</td>
<td>data MSB during FRM LRC</td>
<td></td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_AC97</td>
<td>no</td>
<td>AC97 mode</td>
<td></td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_PDM</td>
<td>no</td>
<td>Pulse density modulation</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_NB_NF</td>
<td>yes</td>
<td>Normal bit- and frameclock</td>
<td></td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_NB_IF</td>
<td>yes</td>
<td>Normal bitclock, inverted frameclock</td>
<td></td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_IB_NF</td>
<td>yes</td>
<td>Inverted frameclock, normal bitclock</td>
<td></td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_IB_IF</td>
<td>yes</td>
<td>Inverted bit- and frameclock</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_CBM_CFM</td>
<td>yes</td>
<td>Codec bit- and frameclock master</td>
<td>Master mode is not supported if the LRCLK is used as clock source</td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_CBS_CFM</td>
<td>no</td>
<td>Codec bitclock slave, frameclock master</td>
<td></td>
</tr>
<tr class="even">
<td>SND_SOC_DAIFMT_CBM_CFS</td>
<td>no</td>
<td>Codec bitclock master, frameclock slave</td>
<td></td>
</tr>
<tr class="odd">
<td>SND_SOC_DAIFMT_CBS_CFS</td>
<td>yes</td>
<td>Codec bit- and frameclock slave</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="system-clock-configuration">
<h3>System clock configuration<a class="headerlink" href="#system-clock-configuration" title="Link to this heading">¶</a></h3>
<p>The sysclk can either be provided by the internal PLL derived from the MCLK signal or by the LRCLK signal.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span><span class="w"> </span><span class="n">adau1977_clk_id</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ADAU1977_SYSCLK</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span><span class="w"> </span><span class="n">adau1977_sysclk_src</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ADAU1977_SYSCLK_SRC_MCLK</span><span class="p">,</span>
<span class="w">    </span><span class="n">ADAU1977_SYSCLK_SRC_LRCLK</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
<p>If the MCLK is used the supported sampling rates of the device is constraint to those sample rates that can be derived from the the MCLK. The constraints are setup in the CODEC driver’s startup routine. This means that the sysclk needs to be configured before the CODEC’s startup callback is called. This can either be done from the machine driver’s startup or init callback.</p>
<p>For some hardware configurations it might be possible to change the MCLK frequency at runtime (e.g. to support both 44.1kHz and 48kHz based sample rates). In this case in order for the CODEC driver to not set any sample rate constraints the sysclk frequency should be set to 0 until it has been decided which MCLK frequency is used. This can for example be implemented by setting the sysclk to 0 in the machine driver’s startup callback and setting it to the actual frequency in the hw_params callback.</p>
</section>
<section id="tdm-configuration">
<h3>TDM configuration<a class="headerlink" href="#tdm-configuration" title="Link to this heading">¶</a></h3>
<p>The TDM mode of the ADAU1977 can be configured using the snd_soc_dai_set_tdm_slot() function.</p>
<ul class="simple">
<li><p>The number of slots can be either 2, 4, 8 or 16. If the number of slots is set to 0 the device will go to I2S mode.</p></li>
<li><p>The slot width can be 16, 24, 32 bits per slot (In master mode only 16 and 32 bits per slot are supported)</p></li>
<li><p>tx_mask must always be 0.</p></li>
<li><p>Each slot can hold the data sample of one channel. Which slot holds which channel is configured by rx_mask. The first bit that is set in rx_mask is the slot that holds the first channel, the second bit the slot that holds the second channel and so on. If less then 4 bits are set the channels for which no slot has been provided are disabled. (E.g. 0x33, configures channel 0 to slot 0, channel 1 to slot 1, channel 2 to slot 4 and channel 3 to slot 4).</p></li>
</ul>
<p>Example TDM configuration:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">snd_soc_dai_set_tdm_slot</span><span class="p">(</span><span class="n">codec_dai</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0f</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>
</pre></div>
</div>
<p>To configure whether the unused TDM slots should be tristated or actively driven low the snd_soc_dai_set_tristate() function is used. By default they are driven low.</p>
<p>Example tristate configuration:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">snd_soc_dai_set_tristate</span><span class="p">(</span><span class="n">codec_dai</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="example-machine-driver-configuration">
<h3>Example machine driver configuration<a class="headerlink" href="#example-machine-driver-configuration" title="Link to this heading">¶</a></h3>
<section id="fixed-mclk">
<h4>Fixed MCLK<a class="headerlink" href="#fixed-mclk" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">eval_adau1977_init</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_pcm_runtime</span><span class="w"> </span><span class="o">*</span><span class="n">rtd</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">snd_snd_soc_codec_set_sysclk_set_sysclk</span><span class="p">(</span><span class="n">rtd</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">,</span><span class="w"> </span><span class="n">ADAU1977_SYSCLK</span><span class="p">,</span>
<span class="w">            </span><span class="n">ADAU1977_SYSCLK_SRC_MCLK</span><span class="p">,</span><span class="w"> </span><span class="mi">1228000</span><span class="p">,</span><span class="w"> </span><span class="n">SND_SOC_CLOCK_IN</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_dai_link</span><span class="w"> </span><span class="n">eval_adau1977_dai</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adau1977&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">stream_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ADAU1977&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="p">.</span><span class="n">cpu_dai_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;bfin-i2s.0&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="p">.</span><span class="n">codec_dai_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adau1977-hifi&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">platform_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;bfin-i2s-pcm-audio&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">codec_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adau1977.0-0011&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">init</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eval_adau1977_init</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">dai_fmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SND_SOC_DAIFMT_I2S</span><span class="w"> </span><span class="o">|</span>
<span class="w">        </span><span class="n">SND_SOC_DAIFMT_NB_NF</span><span class="w"> </span><span class="o">|</span>
<span class="w">        </span><span class="n">SND_SOC_DAIFMT_CBM_CFM</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="configurable-mclk">
<h4>Configurable MCLK<a class="headerlink" href="#configurable-mclk" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">eval_adau1977_init</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_pcm_runtime</span><span class="w"> </span><span class="o">*</span><span class="n">rtd</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">snd_snd_soc_codec_set_sysclk_set_sysclk</span><span class="p">(</span><span class="n">rtd</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">,</span><span class="w"> </span><span class="n">ADAU1977_SYSCLK</span><span class="p">,</span>
<span class="w">            </span><span class="n">ADAU1977_SYSCLK_SRC_MCLK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">SND_SOC_CLOCK_IN</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">eval_adau1977_hw_params</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_pcm_substream</span><span class="w"> </span><span class="o">*</span><span class="n">substream</span><span class="p">,</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_pcm_hw_params</span><span class="w"> </span><span class="o">*</span><span class="n">params</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_pcm_runtime</span><span class="w"> </span><span class="o">*</span><span class="n">rtd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">substream</span><span class="o">-&gt;</span><span class="n">private_data</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">params_rate</span><span class="p">(</span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">441000</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="n">mclk_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11289600</span><span class="p">;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="n">mclk_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12288000</span><span class="p">;</span>

<span class="w">    </span><span class="n">clk_set_rate</span><span class="p">(</span><span class="n">mclk</span><span class="p">,</span><span class="w"> </span><span class="n">mclk_rate</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">snd_snd_soc_codec_set_sysclk_set_sysclk</span><span class="p">(</span><span class="n">rtd</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">,</span><span class="w"> </span><span class="n">ADAU1977_SYSCLK</span><span class="p">,</span>
<span class="w">            </span><span class="n">ADAU1977_SYSCLK_SRC_MCLK</span><span class="p">,</span><span class="w"> </span><span class="n">mclk_rate</span><span class="p">,</span><span class="w"> </span><span class="n">SND_SOC_CLOCK_IN</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_ops</span><span class="w"> </span><span class="n">eval_adau1977_ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">hw_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bfin_eval_adau1x61_hw_params</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">snd_soc_dai_link</span><span class="w"> </span><span class="n">eval_adau1977_dai</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adau1977&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">stream_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ADAU1977&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="p">.</span><span class="n">cpu_dai_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;bfin-i2s.0&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="p">.</span><span class="n">codec_dai_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adau1977-hifi&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">platform_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;bfin-i2s-pcm-audio&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">codec_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;adau1977.0-0011&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">eval_adau1977_ops</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">init</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eval_adau1977_init</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">dai_fmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SND_SOC_DAIFMT_I2S</span><span class="w"> </span><span class="o">|</span>
<span class="w">        </span><span class="n">SND_SOC_DAIFMT_NB_NF</span><span class="w"> </span><span class="o">|</span>
<span class="w">        </span><span class="n">SND_SOC_DAIFMT_CBM_CFM</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
<!-- CMDS: noheader firstseconly noeditbtn -->
</section>
</section>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="adau1701.html" title="Previous document" class="prev">ADAU1701 Sound Audio System Linux Driver</a>
    <a href="adau7002.html" title="Next document" class="next">ADAU7002 Stereo PDM to I2S or TDM Conversion IC Linux Driver</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>

  
  <form action="" method="get" class="search-area">
    <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
    <button value="search"></button>
    <span id="search-progress"></span>
  </form>
  
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>