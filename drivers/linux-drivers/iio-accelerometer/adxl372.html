<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ADXL372 Input 3-Axis Digital Accelerometer Linux Driver &#8212; Linux Kernel: Variant from Analog Devices, Inc. v6.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.min.css?v=cf8483f0" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <script src="../../../_static/documentation_options.js?v=cb43cce9"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/tabs.js?v=3ee01567"></script>
    <script defer="" src="../../../_static/app.umd.js?v=96350458"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="ADIS16201 IIO Dual-Axis Digital Inclinometer and Accelerometer Linux Driver" href="adis16201.html" />
    <link rel="prev" title="ADXL367 Input 3-Axis Digital Accelerometer Linux Driver" href="adxl367.html" />
   
  
    <meta name="robots" content="noindex">
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <header>
    <div class="header">
      <div id="left">
        <label id="show-sidebar" for="input-show-toc" title="Show/hide index"></label>
      </div>
      <div id="right">
        <span>
          <a id="logo-org" href="https://analog.com"></a>
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a>
        </span>
        <span class="reverse">
          <label id="show-localtoc" for="input-show-localtoc" title="Show/hide contents"></label>
        </span>
      </div>
    </div>
    <div class="repotoc-tree">
      <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

    </div>
  </header>

    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">ADXL372 Input 3-Axis Digital Accelerometer Linux Driver</a><ul>
<li><a class="reference internal" href="#supported-devices">Supported Devices</a></li>
<li><a class="reference internal" href="#evaluation-boards">Evaluation Boards</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a><ul>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#files">Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-platform-device-initialization">Example platform device initialization</a></li>
<li><a class="reference internal" href="#driver-testing">Driver testing</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="../../../drivers_index.html">Linux Drivers</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../multifunction-device/adp5520.html">ADP5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8860.html">ADP8860</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8870.html">ADP8870</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clk/adi/clk-ad9545.c.html">AD9545</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5588.html">ADP5587</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5589.html">ADP5585</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/axi_fan_control.html">Fan Control IP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/ltc2947.html">LTC2947</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin1100.html">ADIN1100</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin.html">ADIN1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/adin1110.html">ADIN1110</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/adin2111.html">ADIN2111</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-mac-phy/open_alliance.html">Open Alliance - 10BASE-T1x MAC-PHY Serial Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="adxl313.html">ADXL312,</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl345.html">ADXL345</a></li>
<li class="toctree-l2"><a class="reference internal" href="adxl355.html">ADXL355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl362.html">ADXL362</a></li>
<li class="toctree-l2"><a class="reference internal" href="adxl367.html">ADXL367</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ADXL372</a></li>
<li class="toctree-l2"><a class="reference internal" href="adis16201.html">ADIS16201</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build.html">Building Kernels</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="adxl372-input-3-axis-digital-accelerometer-linux-driver">
<h1>ADXL372 Input 3-Axis Digital Accelerometer Linux Driver<a class="headerlink" href="#adxl372-input-3-axis-digital-accelerometer-linux-driver" title="Link to this heading">¶</a></h1>
<section id="supported-devices">
<h2>Supported Devices<a class="headerlink" href="#supported-devices" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://analog.com/ADXL372">ADXL372</a></p></li>
</ul>
</section>
<section id="evaluation-boards">
<h2>Evaluation Boards<a class="headerlink" href="#evaluation-boards" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://analog.com/EVAL-ADXL372Z">EVAL-ADXL372Z</a></p></li>
</ul>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>This is a Linux industrial I/O (<a class="reference internal" href="#/software/linux/docs/iio/iio"><span class="xref myst">IIO</span></a>) subsystem driver, targeting dual or quad channel serial interface ADCs.
The industrial I/O subsystem provides a unified framework for drivers for many different types of converters and sensors using a number of different physical interfaces (i2c, spi, etc).
See <a class="reference internal" href="#/software/linux/docs/iio/iio"><span class="xref myst">IIO</span></a> for more information.</p>
</section>
<section id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Link to this heading">¶</a></h2>
<section id="status">
<h3>Status<a class="headerlink" href="#status" title="Link to this heading">¶</a></h3>
<table>
<thead>
<tr class="header">
<th>Source</th>
<th>Mainlined?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="git.linux.org&gt;drivers/iio/accel/adxl372.c">git</a></td>
<td><a href="git.linux.org&gt;drivers/iio/accel/adxl372.c">Yes</a></td>
</tr>
</tbody>
</table>
</section>
<section id="files">
<h3>Files<a class="headerlink" href="#files" title="Link to this heading">¶</a></h3>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>core driver</td>
<td><a href="linux.github&gt;master?drivers/iio/accel/adxl372.c">drivers/iio/accel/adxl372.c</a></td>
</tr>
<tr class="even">
<td>spi driver</td>
<td><a href="linux.github&gt;master?drivers/iio/accel/adxl372_spi.c">drivers/iio/accel/adxl372_spi.c</a></td>
</tr>
<tr class="odd">
<td>i2c driver</td>
<td><a href="linux.github&gt;master?drivers/iio/accel/adxl372_i2c.c">drivers/iio/accel/adxl372_i2c.c</a></td>
</tr>
<tr class="even">
<td>header</td>
<td><a href="linux.github&gt;master?drivers/iio/iio/accel/adxl372.h">drivers/iio/accel/adxl372.h</a></td>
</tr>
<tr class="odd">
<td>Documentation</td>
<td><a href="linux.github&gt;master?Documentation/devicetree/bindings/iio/accel/adxl345.txt">adxl345.txt</a></td>
</tr>
<tr class="even">
<td>ABI documentation</td>
<td><a href="linux.github&gt;master?Documentation/ABI/testing/sysfs-bus-iio-accel-adxl372">sysfs-bus-iio-accel-adxl372</a></td>
</tr>
</tbody>
</table>
<p>Example device tree</p>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dts</td>
<td><a href="linux.github&gt;rpi-4.19.y?arch/arm/boot/dts/overlays/rpi-adxl372-overlay.dts">rpi-adxl372-overlay.dts</a></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="example-platform-device-initialization">
<h2>Example platform device initialization<a class="headerlink" href="#example-platform-device-initialization" title="Link to this heading">¶</a></h2>
<p>Required devicetree properties:</p>
<ul class="simple">
<li><p>compatible: Needs to be the name of the device. E.g. “adi,adxl372”</p></li>
<li><p>reg: the I2C address or SPI chip select number for the device</p></li>
</ul>
<p>Required properties for SPI bus usage:</p>
<ul class="simple">
<li><p>spi-max-frequency: Maximum SPI clock frequency.</p></li>
</ul>
<p>Optional properties:</p>
<ul class="simple">
<li><p>interrupts: a list of interrupt specifiers</p></li>
</ul>
<p>Example for a SPI device node:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>    #address-cells = &lt;1&gt;;
    #size-cells = &lt;0&gt;;
    status = &quot;okay&quot;;

    adxl372@0 {
        compatible = &quot;adi,adxl372&quot;;
        reg = &lt;0&gt;;
        spi-max-frequency = &lt;1000000&gt;;
        interrupts = &lt;25 2&gt;;
        interrupt-parent = &lt;&amp;gpio&gt;;
    };
</pre></div>
</div>
<p>Example for a I2C device node:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>    #address-cells = &lt;1&gt;;
    #size-cells = &lt;0&gt;;
    status = &quot;okay&quot;;

    adxl372@53 {
        compatible = &quot;adi,adxl372&quot;;
        reg = &lt;0x53&gt;;
        interrupts = &lt;25 2&gt;;
        interrupt-parent = &lt;&amp;gpio&gt;;
    };
</pre></div>
</div>
</section>
<section id="driver-testing">
<h2>Driver testing<a class="headerlink" href="#driver-testing" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/&gt;<span class="w"> </span>**cd<span class="w"> </span>/sys/bus/iio/devices/**
root:/sys/bus/iio/devices&gt;<span class="w"> </span>ls
iio:device0

root:/sys/bus/iio/devices&gt;<span class="w"> </span>**cd<span class="w"> </span>iio:device0**

root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**ls<span class="w"> </span>-l**
drwxr-xr-x<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>buffer
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>current_timestamp_clock
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>dev
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:28<span class="w"> </span>in_accel_filter_low_pass_3db_frequency
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>in_accel_filter_low_pass_3db_frequency_available
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:27<span class="w"> </span>in_accel_sampling_frequency
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>in_accel_scale
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>in_accel_x_raw
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>in_accel_y_raw
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>in_accel_z_raw
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>name
lrwxrwxrwx<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>of_node<span class="w"> </span>-&gt;<span class="w"> </span>../../../../../../../../firmware/devicetree/base/soc/spi@7e204000/adxl372@0
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>peak_fifo_mode_enable
drwxr-xr-x<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>power
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>sampling_frequency_available
drwxr-xr-x<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>scan_elements
lrwxrwxrwx<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>subsystem<span class="w"> </span>-&gt;<span class="w"> </span>../../../../../../../../bus/iio
drwxr-xr-x<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>trigger
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">04</span>:25<span class="w"> </span>uevent
</pre></div>
</div>
<div class="docutils">
<h5 class="rubric" id="show-device-name">Show device name</h5>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>name**
adxl372
</pre></div>
</div>
<div class="docutils">
<h5 class="rubric" id="show-scale">Show scale</h5>
<p><strong>Description:</strong>
scale to be applied to in_accel_*_raw in order to obtain the acceleration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>in_accel_scale**
<span class="m">0</span>.958241
</pre></div>
</div>
<div class="docutils">
<h5 class="rubric" id="show-axis-x-measurement">Show axis x measurement</h5>
<p><strong>Description:</strong>
Raw unscaled acceleration measurement on x axis</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>in_accel_x_raw**
-5
</pre></div>
</div>
<div class="docutils">
<h5 class="rubric" id="set-sampling-frequency">Set sampling frequency</h5>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>sampling_frequency_available**
<span class="m">400</span><span class="w"> </span><span class="m">800</span><span class="w"> </span><span class="m">1600</span><span class="w"> </span><span class="m">3200</span><span class="w"> </span><span class="m">6400</span>
root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>in_accel_sampling_frequency**
<span class="m">6400</span>
root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**echo<span class="w"> </span><span class="m">3200</span><span class="w"> </span>&gt;<span class="w"> </span>in_accel_sampling_frequency**
root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>in_accel_sampling_frequency**
<span class="m">3200</span>
</pre></div>
</div>
<div class="docutils">
<h5 class="rubric" id="show-available-bandwidths-for-the-current-set-frequency">Show available bandwidths for the current set frequency</h5>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>in_accel_sampling_frequency**
<span class="m">256000</span>
root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>in_accel_filter_low_pass_3db_frequency_available**
<span class="m">200</span><span class="w"> </span><span class="m">400</span><span class="w"> </span><span class="m">800</span><span class="w"> </span><span class="m">1600</span><span class="w"> </span><span class="m">3200</span>
root:/sys/bus/iio/devices/iio:device0&gt;
</pre></div>
</div>
<div class="docutils">
<h5 class="rubric" id="change-the-bandwidth">Change the bandwidth</h5>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>in_accel_filter_low_pass_3db_frequency_available**
<span class="m">200</span><span class="w"> </span><span class="m">400</span><span class="w"> </span><span class="m">800</span><span class="w"> </span><span class="m">1600</span><span class="w"> </span><span class="m">3200</span>
root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>in_accel_filter_low_pass_3db_frequency**
<span class="m">3200</span>
root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**echo<span class="w"> </span><span class="m">1600</span><span class="w"> </span>&gt;<span class="w"> </span>in_accel_filter_low_pass_3db_frequency**
root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>in_accel_filter_low_pass_3db_frequency**
<span class="m">1600</span>
root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**echo<span class="w"> </span><span class="m">3200</span><span class="w"> </span>&gt;<span class="w"> </span>in_accel_sampling_frequency**
root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>in_accel_filter_low_pass_3db_frequency_available**
<span class="m">200</span><span class="w"> </span><span class="m">400</span><span class="w"> </span><span class="m">800</span><span class="w"> </span><span class="m">1600</span>
root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**echo<span class="w"> </span><span class="m">1600</span><span class="w"> </span>&gt;<span class="w"> </span>in_accel_sampling_frequency**
root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>in_accel_filter_low_pass_3db_frequency**
<span class="m">800</span>
</pre></div>
</div>
<div class="docutils">
<h3 class="rubric" id="using-the-fifo-buffer">Using the FIFO Buffer</h3>
<p><strong>Description:</strong>
The ADXL372 includes a deep, 512 sample FIFO buffer. The 512 FIFO samples can be allotted in several ways, such as the following:</p>
<ul class="simple">
<li><p>170 sample sets of concurrent 3-axis data</p></li>
<li><p>256 sample sets of concurrent 2-axis data (user selectable)</p></li>
<li><p>512 sample sets of single-axis data</p></li>
<li><p>170 sets of impact event peak (x, y, z)</p></li>
</ul>
<h4 class="rubric" id="trigger-management">Trigger management</h4>
<p><strong>Description:</strong>
The FIFO is configured in <strong>Stream Mode</strong> and <strong>FIFO_FULL</strong> interrupt is enabled. The interrupt will be triggered when the FIFO watermark is reached.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**cat<span class="w"> </span>trigger/current_trigger**
adxl372-dev-*
</pre></div>
</div>
<div class="docutils">
<h4 class="rubric" id="buffer-management">Buffer management</h4>
<p><strong>Description:</strong>
The scan_elements directory contains interfaces for elements that will be captured for a single triggered sample set in the buffer</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0/scan_elements&gt;<span class="w"> </span>**ls<span class="w"> </span>-l**
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_accel_x_en
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_accel_x_index
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_accel_x_type
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_accel_y_en
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_accel_y_index
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_accel_y_type
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_accel_z_en
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_accel_z_index
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_accel_z_type
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_timestamp_en
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_timestamp_index
-r--r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">08</span>:08<span class="w"> </span>in_timestamp_type
root:/sys/bus/iio/devices/iio:device0/scan_elements&gt;
</pre></div>
</div>
<div class="docutils">
<p>Before enabling the buffer, a few steps need to be completed.</p>
<ul class="simple">
<li><p>For example, if we want the FIFO to store sample sets of concurrent 3-axis data, we need to enable the scan elements:</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0/scan_elements&gt;<span class="w"> </span>**echo<span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>in_accel_x_en**
root:/sys/bus/iio/devices/iio:device0/scan_elements&gt;<span class="w"> </span>**echo<span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>in_accel_y_en**
root:/sys/bus/iio/devices/iio:device0/scan_elements&gt;<span class="w"> </span>**echo<span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>in_accel_z_en**
</pre></div>
</div>
<div class="docutils">
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0/buffer&gt;<span class="w"> </span>ls
**enable**<span class="w"> </span>**hwfifo_enabled**<span class="w"> </span>**hwfifo_watermark**<span class="w"> </span>**hwfifo_watermark_max**<span class="w"> </span>**hwfifo_watermark_min**<span class="w"> </span>**length<span class="w"> </span>**<span class="w"> </span>**watermark**
root:/sys/bus/iio/devices/iio:device0/buffer&gt;
</pre></div>
</div>
<div class="docutils">
<ul class="simple">
<li><p>Set the buffer length:</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0/buffer&gt;<span class="w"> </span>**echo<span class="w"> </span><span class="m">1024</span><span class="w"> </span>&gt;<span class="w"> </span>length**
</pre></div>
</div>
<div class="docutils">
<ul class="simple">
<li><p>Set the fifo watermak:</p></li>
</ul>
<p>Because we enabled all three channels, then the watermark can be set to a maximum of 170 sample sets.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0/buffer&gt;<span class="w"> </span>**echo<span class="w"> </span><span class="m">170</span><span class="w"> </span>&gt;<span class="w"> </span>watermark**
</pre></div>
</div>
<div class="docutils">
<p>The FIFO can also be configured to store peak acceleration (x, y, and z) for every over-threshold event. This can be done by writing 1 to the <strong>peak_fifo_mode_enable</strong> attribute:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0&gt;<span class="w"> </span>**echo<span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>peak_fifo_mode_enable**
</pre></div>
</div>
<div class="docutils">
<p>Note that this mode can work only if all three axis are enabled.</p>
<ul class="simple">
<li><p>Enable the buffer:</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0/buffer&gt;<span class="w"> </span>**echo<span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>enable**
</pre></div>
</div>
<div class="docutils">
<p>To read samples:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root:/sys/bus/iio/devices/iio:device0/buffer&gt;<span class="w"> </span>**cat<span class="w"> </span>/dev/iio:device0**
</pre></div>
</div>
<div class="docutils">
<h2 class="rubric" id="low-level-register-access-via-debugfs-direct-reg-access">Low level register access via debugfs (direct_reg_access)</h2>
<p>Some IIO drivers feature an optional debug facility, allowing users to read or write registers directly. Special care needs to be taken when using this feature, since you can modify registers on the back of the driver. Accessing debugfs requires root privileges.</p>
<p>In order to identify if the IIO device in question feature this option you first need to identify the IIO device number.</p>
<p>Therefore read the name attribute of each IIO device</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@analog:~#<span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span>/sys/bus/iio/devices/iio:device*/name
adxl372
root@analog:~#
</pre></div>
</div>
<div class="docutils">
<p>Change directory to /sys/kernel/debug/iio/iio:deviceX and check if the direct_reg_access file exists.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@analog:~#<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/sys/kernel/debug/iio/iio:device0/
root@analog:/sys/kernel/debug/iio/iio:device0#<span class="w"> </span>ls<span class="w"> </span>direct_reg_access
ls<span class="w"> </span>direct_reg_access
root@analog:/sys/kernel/debug/iio/iio:device0#
</pre></div>
</div>
<div class="docutils">
<p>Reading</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@analog:/sys/kernel/debug/iio/iio:device0#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>0x0<span class="w"> </span>&gt;<span class="w"> </span>direct_reg_access

root@analog:/sys/kernel/debug/iio/iio:device0#<span class="w"> </span>cat<span class="w"> </span>direct_reg_access
0xAD
root@analog:/sys/kernel/debug/iio/iio:device0#
</pre></div>
</div>
<div class="docutils">
<p>Writing</p>
<p>Write ADDRESS VALUE</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<!-- ATTRS: box="" bggreen="" -->
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<!-- ATTRS: info="" -->
<p>This specifies any shell prompt running on the target</p>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@analog:/sys/kernel/debug/iio/iio:device0#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>0x3D<span class="w"> </span>0x80<span class="w"> </span>&gt;<span class="w"> </span>direct_reg_access
root@analog:/sys/kernel/debug/iio/iio:device0#<span class="w"> </span>cat<span class="w"> </span>direct_reg_access
0x80
root@analog:/sys/kernel/debug/iio/iio:device0#
</pre></div>
</div>
<div class="docutils">
<h2 class="rubric" id="more-information">More Information</h2>
<!-- CMDS: noheader firstseconly noeditbtn -->
<ul class="simple">
<li><p>IIO mailing list: <a class="reference external" href="mailto:linux-iio&#37;&#52;&#48;vger&#46;kernel&#46;org">linux-iio<span>&#64;</span>vger<span>&#46;</span>kernel<span>&#46;</span>org</a></p></li>
<li><p><a class="reference external" href="https://www.kernel.org/doc/Documentation/ABI/testing">IIO Linux Kernel Documentation sysfs-bus-iio-*</a></p></li>
<li><p><a class="reference external" href="https://www.kernel.org/doc/Documentation/ABI/testing/sysfs-bus-iio">IIO Documentation</a></p></li>
<li><p><a class="reference internal" href="#/resources/tools-software/linux-software/iio_oscilloscope"><span class="xref myst">IIO test and visualization application</span></a></p></li>
<li><p><a class="reference internal" href="#/resources/tools-software/linux-software/libiio"><span class="xref myst">libiio - IIO system library</span></a></p></li>
<li><p><a class="reference internal" href="#/resources/tools-software/linux-software/libiio_internals"><span class="xref myst">libiio - Internals</span></a></p></li>
<li><p><a class="reference internal" href="#/resources/tools-software/pointers"><span class="xref myst">Pointers and good books</span></a></p></li>
<li><p><a class="reference external" href="https://events.static.linuxfound.org/sites/events/files/slides/iio_high_speed.pdf">IIO High Speed</a></p></li>
<li><p><a class="reference external" href="http://video.fosdem.org/2015/devroom-software_defined_radio/iiosdr.mp4">Software Defined Radio using the IIO framework</a></p></li>
<li><p><img alt="libiio introduction" src="https://youtube.com/p_VntEwUe24" /></p></li>
</ul>
</div>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="adxl367.html" title="Previous document" class="prev">ADXL367 Input 3-Axis Digital Accelerometer Linux Driver</a>
    <a href="adis16201.html" title="Next document" class="next">ADIS16201 IIO Dual-Axis Digital Inclinometer and Accelerometer Linux Driver</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>

  
  <form action="" method="get" class="search-area">
    <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
    <button value="search"></button>
    <span id="search-progress"></span>
  </form>
  
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>