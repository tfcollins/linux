<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Open Alliance TC6-10BASE-T1x MAC-PHY Serial Interface &#8212; Linux Kernel: Variant from Analog Devices, Inc. v6.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.min.css?v=cf8483f0" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <script src="../../../_static/documentation_options.js?v=cb43cce9"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/tabs.js?v=3ee01567"></script>
    <script defer="" src="../../../_static/app.umd.js?v=96350458"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="ADXL312, ADXL313, ADXL314 Low Noise, Low Drift, Low Power, 3-Axis MEMS Accelerometers" href="../iio-accelerometer/adxl313.html" />
    <link rel="prev" title="ADIN2111 10BASE-T1L 2-Port Ethernet Switch Linux Driver" href="adin2111.html" />
   
  
    <meta name="robots" content="noindex">
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <header>
    <div class="header">
      <div id="left">
        <label id="show-sidebar" for="input-show-toc" title="Show/hide index"></label>
      </div>
      <div id="right">
        <span>
          <a id="logo-org" href="https://analog.com"></a>
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a>
        </span>
        <span class="reverse">
          <label id="show-localtoc" for="input-show-localtoc" title="Show/hide contents"></label>
        </span>
      </div>
    </div>
    <div class="repotoc-tree">
      <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

    </div>
  </header>

    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Open Alliance TC6-10BASE-T1x MAC-PHY Serial Interface</a><ul>
<li><a class="reference internal" href="#supported-devices">Supported Devices</a></li>
<li><a class="reference internal" href="#supported-boards">Supported Boards</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a><ul>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#files">Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#enabling-linux-driver-support">Enabling Linux driver support</a></li>
<li><a class="reference internal" href="#driver-testing">Driver testing</a><ul>
<li><a class="reference internal" href="#device-tree">Device Tree</a></li>
<li><a class="reference internal" href="#ifconfig">ifconfig</a></li>
<li><a class="reference internal" href="#ethtool">ethtool</a><ul>
<li><a class="reference internal" href="#example-seeing-mac-phy-info">Example: Seeing MAC &amp; PHY info</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="../../../drivers_index.html">Linux Drivers</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../multifunction-device/adp5520.html">ADP5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8860.html">ADP8860</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8870.html">ADP8870</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clk/adi/clk-ad9545.c.html">AD9545</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5588.html">ADP5587</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5589.html">ADP5585</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/axi_fan_control.html">Fan Control IP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/ltc2947.html">LTC2947</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin1100.html">ADIN1100</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin.html">ADIN1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="adin1110.html">ADIN1110</a></li>
<li class="toctree-l2"><a class="reference internal" href="adin2111.html">ADIN2111</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Open Alliance - 10BASE-T1x MAC-PHY Serial Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl313.html">ADXL312,</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl345.html">ADXL345</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl355.html">ADXL355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl362.html">ADXL362</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl367.html">ADXL367</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl372.html">ADXL372</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16201.html">ADIS16201</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build.html">Building Kernels</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="open-alliance-tc6-10base-t1x-mac-phy-serial-interface">
<h1>Open Alliance TC6-10BASE-T1x MAC-PHY Serial Interface<a class="headerlink" href="#open-alliance-tc6-10base-t1x-mac-phy-serial-interface" title="Link to this heading">¶</a></h1>
<section id="supported-devices">
<h2>Supported Devices<a class="headerlink" href="#supported-devices" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://analog.com/ADIN1110">ADIN1110</a></p></li>
<li><p><a class="reference external" href="https://analog.com/ADIN2111">ADIN2111</a></p></li>
</ul>
</section>
<section id="supported-boards">
<h2>Supported Boards<a class="headerlink" href="#supported-boards" title="Link to this heading">¶</a></h2>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>The IEEE 802.3cg project defines two 10 Mbit/s PHYs operating over a single pair of conductors. The
10BASE-T1L (Clause 146) is a long reach PHY supporting full duplex point-to-point operation over 1 km of
single balanced pair of conductors. The 10BASE-T1S (Clause 147) is a short reach PHY supporting full / half
duplex point-to-point operation over 15 m of single balanced pair of conductors, or half duplex multidrop bus
operation over 25 m of single balanced pair of conductors.</p>
<p>Furthermore, the IEEE 802.3cg project defines the new Physical Layer Collision Avoidance (PLCA)
Reconciliation Sublayer (Clause 148) meant to provide improved determinism to the CSMA/CD media access
method. PLCA works in conjunction with the 10BASE-T1S PHY operating in multidrop mode.</p>
<p>The aforementioned PHYs are intended to cover the low-speed / low-cost applications in industrial and
automotive environment. The large number of pins (16) required by the MII interface, which is specified by
the IEEE 802.3 in Clause 22, is one of the major cost factors that need to be addressed to fulfil this objective.</p>
<p>The MAC-PHY solution integrates an IEEE Clause 4 MAC and a 10BASE-T1x PHY exposing a low pin count Serial
Peripheral Interface (SPI) to the host microcontroller. This also enables the addition of Ethernet functionality
to existing low-end microcontrollers which do not integrate a MAC controller.</p>
</section>
<section id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Link to this heading">¶</a></h2>
<section id="status">
<h3>Status<a class="headerlink" href="#status" title="Link to this heading">¶</a></h3>
<table>
<tbody>
<tr class="odd">
<td>Source</td>
<td>Mainlined?</td>
</tr>
<tr class="even">
<td><a href="linux.github&gt;adin1110-open-alliance/drivers/net/ethernet/open_alliance.c">open_alliance.c</a></td>
<td>No</td>
</tr>
<tr class="odd">
<td><a href="linux.github&gt;adin1110-open-alliance/include/linux/open_alliance.h">open_alliance.h</a></td>
<td>No</td>
</tr>
<tr class="even">
<td><a href="linux.github&gt;adin1110-open-alliance/drivers/net/ethernet/adi/adin1110.c">adin1110.c</a></td>
<td>No</td>
</tr>
</tbody>
</table>
</section>
<section id="files">
<h3>Files<a class="headerlink" href="#files" title="Link to this heading">¶</a></h3>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>API</td>
<td><a href="linux.github&gt;adin1110-open-alliance/drivers/net">drivers/net/ethernet/open_alliance.c</a></td>
</tr>
<tr class="even">
<td>API</td>
<td><a href="linux.github&gt;adin1110-open-alliance/include/linux">include/linux/open_alliance.h</a></td>
</tr>
<tr class="odd">
<td>Driver</td>
<td><a href="linux.github&gt;adin1110-open-alliance/drivers/net/ethernet/adi/">drivers/net/ethernet/adi/adin1110.c</a></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="enabling-linux-driver-support">
<h2>Enabling Linux driver support<a class="headerlink" href="#enabling-linux-driver-support" title="Link to this heading">¶</a></h2>
<p>Configure kernel with “make menuconfig” (alternatively use “make xconfig” or
“make qconfig”)</p>
<ol class="arabic simple">
<li><p>Hit the search button (typically the slash “/” key)</p></li>
<li><p>Type open_alliance, then hit Enter; if nothing shows up, the driver is not available in your kernel tree, please use <a class="reference external" href="https://github.com/analogdevicesinc/linux/">the ADI linux tree</a></p></li>
<li><p>Press 1 (the key), then hit Enter</p></li>
<li><p>You should see the location + dependencies for enabling the driver</p></li>
</ol>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_OPEN_ALLIANCE:                                                                                                                                                                              
The Open Alliance SPI protocol is used on 10BASE-T1x                                                                                                                                              
MACPHY Serial Interface for communication                                                                                                                                                          
with the host controller.
                                                                                                                                                                      
Say Y to include support for the OPEN_ALLIANCE.                                                                                                                                                    
To compile this driver as a module, choose M here: the module                                                                                                                                      
will be called dnet.                                                                                                                                                                               

Symbol: OPEN_ALLIANCE [=y]                                                                                                                                                                         
Type  : tristate                                                                                                                                                                                   
Defined at drivers/net/ethernet/Kconfig:147                                                                                                                                                        
    Prompt: Open Alliance 10BASE-T1x support.                                                                                                                                                        
    Depends on: NETDEVICES [=y] &amp;&amp; ETHERNET [=y] &amp;&amp; SPI [=y]                                                                                                                                         
    Location:                                                                                                                                                                                        
        -&gt; Device Drivers                                                                                                                                                                              
            -&gt; Network device support (NETDEVICES [=y])                                                                                                                                                  
                -&gt; Ethernet driver support (ETHERNET [=y])                                                                                                                                                 
    Selects: CRC8 [=y]
</pre></div>
</div>
</section>
<section id="driver-testing">
<h2>Driver testing<a class="headerlink" href="#driver-testing" title="Link to this heading">¶</a></h2>
<p>This requires that another 10BASE-T1L PHY be connected to the other end of the network cable, or that a media converter be used to convert to normal twisted-pair ethernet that standard ethernet cables use.</p>
<p>ADIN1110 communicates with the host via SPI. For 10 Mbps bandwidth, SPI frequency needs to be around 23 MHz. Lower SPI frequencies are supported but will result in a lower bandwidth. At 1 MHz the MAC will provide aprox. 0.4 Mbps of bandwidth.</p>
<p>Connect to host the SCLK, CS_N, SDI, SDO and INT_N. (The INT_N is mandatory, see DT bindings). RX frames and sent TX frames are signaled to the host by INT_N IRQ pin.</p>
<section id="device-tree">
<h3>Device Tree<a class="headerlink" href="#device-tree" title="Link to this heading">¶</a></h3>
<p>ADIN1110 probes via devicetree.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethernet@0 {
    compatible = &quot;adi,adin1110&quot;;
    
        /* SPI CS number */
        reg = &lt;0&gt;;

        /* will need 13.5 MHz for 10 Mbps, lower speeds will result in lower bandwidth */
    spi-max-frequency = &lt;13500000&gt;;

        /* Enables Open Alliance Mode */        
        open-alliance;

        /* optional, will check all control read/writes over SPI */
        open-alliance-protected;

    #address-cells = &lt;1&gt;;
    #size-cells = &lt;0&gt;;

        /* an IRQ is required, INT_N pin is configured to signal RX/TX frames */
    interrupt-parent = &lt;&amp;gpio&gt;;
    interrupts = &lt;25 2&gt;;

    mac-address = [ CA 2F B7 10 23 63 ];

    phy@0 {
        compatible = &quot;ethernet-phy-id0283.bc91&quot;;
        reg = &lt;0x0&gt;;
    };
};
</pre></div>
</div>
</section>
<section id="ifconfig">
<h3>ifconfig<a class="headerlink" href="#ifconfig" title="Link to this heading">¶</a></h3>
<p>This tool will display the general status of the available network interfaces. If they’ve obtained an IP address, RX packets/errors/dropped/etc, TX packets/errors/dropped/etc, MAC address, etc.</p>
<p>Typically, if both TX &amp; RX values are incremented, it means that it is working. Also note that there are error counters; if only the TX/RX counters increment, something may be wrong with the network connection.
Check error/dropped counters too.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root@analog:~# ifconfig eth1
eth1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.160.160  netmask 255.255.255.0  broadcast 192.168.160.255
        inet6 fe80::c82f:b7ff:fe10:2363  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether ca:2f:b7:10:23:63  txqueuelen 1000  (Ethernet)
        RX packets 132  bytes 8548 (8.3 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 79  bytes 9943 (9.7 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 55
</pre></div>
</div>
</section>
<section id="ethtool">
<h3>ethtool<a class="headerlink" href="#ethtool" title="Link to this heading">¶</a></h3>
<p>This tool queries the MAC &amp; PHY via the MAC driver. The MAC driver also allows access to the PHY registers.
ethtool can be used to show &amp; override link settings and other parameters for the MAC &amp; PHY.</p>
<p>Links for the tool:</p>
<ul class="simple">
<li><p>Official page with source code: <a class="reference external" href="https://mirrors.edge.kernel.org/pub/software/network/ethtool/">https://mirrors.edge.kernel.org/pub/software/network/ethtool/</a></p></li>
<li><p>Manual page: <a class="reference external" href="http://man7.org/linux/man-pages/man8/ethtool.8.html">http://man7.org/linux/man-pages/man8/ethtool.8.html</a></p></li>
</ul>
<p><note tip>Some features of ethtool described here are available in newer versions of ethtool. If some of them don’t work, consider upgrading or getting a newer version</note></p>
<section id="example-seeing-mac-phy-info">
<h4>Example: Seeing MAC &amp; PHY info<a class="headerlink" href="#example-seeing-mac-phy-info" title="Link to this heading">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Settings for eth1:
    Supported ports: [ TP MII ]
    Supported link modes:   10baseT/Full 
    Supported pause frame use: Symmetric Receive-only
    Supports auto-negotiation: Yes
    Supported FEC modes: Not reported
    Advertised link modes:  10baseT/Full 
    Advertised pause frame use: No
    Advertised auto-negotiation: Yes
    Advertised FEC modes: Not reported
    Link partner advertised link modes:  10baseT/Full 
    Link partner advertised pause frame use: No
    Link partner advertised auto-negotiation: Yes
    Link partner advertised FEC modes: Not reported
    Speed: 10Mb/s
    Duplex: Full
    Port: MII
    PHYAD: 0
    Transceiver: internal
    Auto-negotiation: on
    Link detected: yes
</pre></div>
</div>
<p>Open Alliance also exposes Chunk level statistics:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root@analog:~/ethtool-5.15# ethtool -S adin2111-0-p0
NIC statistics:
     RX valid data chunks received: 362
     TX chunks sent: 1440
     RX end valid chunks received: 61
     RX chunks to frames: 362
     OA chunks transfered: 1802
</pre></div>
</div>
</section>
</section>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="adin2111.html" title="Previous document" class="prev">ADIN2111 10BASE-T1L 2-Port Ethernet Switch Linux Driver</a>
    <a href="../iio-accelerometer/adxl313.html" title="Next document" class="next">ADXL312, ADXL313, ADXL314 Low Noise, Low Drift, Low Power, 3-Axis MEMS Accelerometers</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>

  
  <form action="" method="get" class="search-area">
    <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
    <button value="search"></button>
    <span id="search-progress"></span>
  </form>
  
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>