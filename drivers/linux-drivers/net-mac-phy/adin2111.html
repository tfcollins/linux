<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ADIN2111 10BASE-T1L 2-Port Ethernet Switch Linux Driver &#8212; Linux Kernel: Variant from Analog Devices, Inc. v6.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.min.css?v=cf8483f0" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <script src="../../../_static/documentation_options.js?v=cb43cce9"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/tabs.js?v=3ee01567"></script>
    <script defer="" src="../../../_static/app.umd.js?v=96350458"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Open Alliance TC6-10BASE-T1x MAC-PHY Serial Interface" href="open_alliance.html" />
    <link rel="prev" title="ADIN1110 10BASE-T1L MAC-PHY Linux Driver" href="adin1110.html" />
   
  
    <meta name="robots" content="noindex">
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <header>
    <div class="header">
      <div id="left">
        <label id="show-sidebar" for="input-show-toc" title="Show/hide index"></label>
      </div>
      <div id="right">
        <span>
          <a id="logo-org" href="https://analog.com"></a>
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a>
        </span>
        <span class="reverse">
          <label id="show-localtoc" for="input-show-localtoc" title="Show/hide contents"></label>
        </span>
      </div>
    </div>
    <div class="repotoc-tree">
      <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
</root>

    </div>
  </header>

    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">ADIN2111 10BASE-T1L 2-Port Ethernet Switch Linux Driver</a><ul>
<li><a class="reference internal" href="#supported-devices">Supported Devices</a></li>
<li><a class="reference internal" href="#supported-boards">Supported Boards</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a><ul>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#files">Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#enabling-linux-driver-support">Enabling Linux driver support</a></li>
<li><a class="reference internal" href="#driver-testing">Driver testing</a><ul>
<li><a class="reference internal" href="#device-tree">Device Tree</a></li>
<li><a class="reference internal" href="#renaming-ethernet-interfaces">Renaming ethernet interfaces</a></li>
<li><a class="reference internal" href="#bridging-the-two-ports">Bridging the two ports</a><ul>
<li><a class="reference internal" href="#printing-the-forwarding-database">Printing the forwarding database</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ifconfig">ifconfig</a></li>
<li><a class="reference internal" href="#ethtool">ethtool</a><ul>
<li><a class="reference internal" href="#example-seeing-mac-phy-info">Example: Seeing MAC &amp; PHY info</a></li>
<li><a class="reference internal" href="#example-changing-link-autonegotiation">Example: changing link autonegotiation</a></li>
<li><a class="reference internal" href="#example-checking-phy-statistics">Example: checking PHY statistics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#throughput-testing-iperf">Throughput testing - iperf</a></li>
<li><a class="reference internal" href="#data-integrity-testing">Data integrity testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ethernet-pointers">Ethernet pointers</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
              <a id="no-logo" href="../../../index.html">
                Linux Kernel: Variant from Analog Devices, Inc.
              </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../../../documentation/university/index.html">University Program</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../pyadi-iio/index.html">pyadi-iio</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build.html">Building Kernels</a></li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="../../../drivers_index.html">Linux Drivers</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../multifunction-device/adp5520.html">ADP5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8860.html">ADP8860</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/adp8870.html">ADP8870</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clk/adi/clk-ad9545.c.html">AD9545</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5588.html">ADP5587</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-keyboard/adp5589.html">ADP5585</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/axi_fan_control.html">Fan Control IP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hwmon/ltc2947.html">LTC2947</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin1100.html">ADIN1100</a></li>
<li class="toctree-l2"><a class="reference internal" href="../net-phy/adin.html">ADIN1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="adin1110.html">ADIN1110</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ADIN2111</a></li>
<li class="toctree-l2"><a class="reference internal" href="open_alliance.html">Open Alliance - 10BASE-T1x MAC-PHY Serial Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl313.html">ADXL312,</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl345.html">ADXL345</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl355.html">ADXL355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/adxl362.html">ADXL362</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl367.html">ADXL367</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adxl372.html">ADXL372</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16201.html">ADIS16201</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16203.html">ADIS16203</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16209.html">ADIS16209</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-accelerometer/adis16240.html">ADIS16240</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/ad8366.html">AD8366</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/ada4250.html">ADA4250</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-amplifiers/hmc425a.html">HMC425</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad400x.html">AD4003</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad4630.html">AD4030-24</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad9208.html">AD6684</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7476a.html">AD7091</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7091r5.html">AD7091R-5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7091r8.html">AD7091R-8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7124.html">AD7124</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7780.html">AD7170</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7192.html">AD7190</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7266.html">AD7265</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7280a.html">AD7280A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7291.html">AD7291</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7298.html">AD7298</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad738x.html">AD7380</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7606.html">AD7605-4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7766.html">AD7766-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7768-1.html">AD7768-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7768.html">AD7768</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7793.html">AD7785</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7791.html">AD7787</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7887.html">AD7887</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad7998.html">AD7991</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad9083.html">AD9083</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-mxfe/ad9081.html">AD9207</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../resources/tools-software/linux-drivers/iio-adc/ad9208.html">AD9208</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/axi-adc-hdl.html">AD9234</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/adaq8092.html">ADAQ8092</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/adas1000.html">ADAS1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adar1000.html">ADAR1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7152.html">AD7152</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7150.html">AD7150</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-cdc/ad7745.html">AD7745</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-addac/ad74413r.html">AD74412R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/axi-ad3552r.html">AD3552R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5064.html">AD5024</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5446.html">AD5300</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5676.html">AD5310R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5360.html">AD5360</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5380.html">AD5380</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5449.html">AD5415</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5421.html">AD5421</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5504.html">AD5501</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5592r.html">AD5592R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5593r.html">AD5593R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5624r.html">AD5624</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5755.html">AD5735</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5764.html">AD5744</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5758.html">AD5758</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5791.html">AD5760</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ad5770r.html">AD5770R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/axi-dac-dds-hdl.html">AD9122</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dac/ltc2664.html">LTC2664</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/ad9832.html">AD9832</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-dds/ad9834.html">AD9833</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-filter/admv8818.html">ADMV8818</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9162.html">AD9161</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9508.html">AD9508</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9517.html">AD9516-0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9523.html">AD9523-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ad9528.html">AD9528</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4159.html">ADF4159</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4350.html">ADF4350</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4360.html">ADF4360-0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4371.html">ADF4371</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf4377.html">ADF4377</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adf5355.html">ADF4355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/admv1013.html">ADMV1013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/admv1014.html">ADMV1014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/adrf6780.html">ADRF6780</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/hmc7044.html">HMC7044</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-pll/ltc6952.html">LTC6952</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16060.html">ADIS16060</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16080.html">ADIS16080</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16130.html">ADIS16130</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16136.html">ADIS16133</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adis16260.html">ADIS16251</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-gyroscope/adxrs450.html">ADXRS450</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-impedance-analyzer/ad5933.html">AD5933</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16400.html">ADIS16300</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16480.html">ADIS16375</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-inertial-measurement-units/adis16475.html">ADIS16460</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s90.html">AD2S90</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s1200.html">AD2S1200</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-resolver/ad2s1210.html">AD2S1210</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-adc/ad6676.html">AD6676</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/ad9361.html">AD9361</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/ad9371.html">AD9371</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adrv9002.html">ADRV9002</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-transceiver/adrv9009.html">ADRV9008-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-temperature/ltc2983.html">LTC2983</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio-vector-power/adl5960.html">ADL5960</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-misc/ad714x.html">AD7142</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7873.html">AD7873</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7877.html">AD7877</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input-touchscreen/ad7879.html">AD7879</a></li>
<li class="toctree-l2"><a class="reference internal" href="../leds/adp1650.html">ADP1650</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/dpot.html">AD5160</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mux/adgs1408.html">ADGS1408</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking-mac802154/adf7242.html">ADF7241</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator/adp150.html">ADP122</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator/ad5398.html">AD5398</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial/max310x.html">MAX3107</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ad1835a.html">AD1835A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ad1936.html">AD1933</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ad73322.html">AD73311</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1361.html">ADAU1361</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1372.html">ADAU1372</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1373.html">ADAU1373</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1381.html">ADAU1381</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1701.html">ADAU1401A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau1977.html">ADAU1977</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau7002.html">ADAU7002</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adau7118.html">ADAU7118</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/adav801.html">ADAV801</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ssm2602.html">SSM2602</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/ssm4567.html">SSM4567</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drm/adv7511.html">ADV7511</a></li>
</ul>
</li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="adin2111-10base-t1l-2-port-ethernet-switch-linux-driver">
<h1>ADIN2111 10BASE-T1L 2-Port Ethernet Switch Linux Driver<a class="headerlink" href="#adin2111-10base-t1l-2-port-ethernet-switch-linux-driver" title="Link to this heading">#</a></h1>
<section id="supported-devices">
<h2>Supported Devices<a class="headerlink" href="#supported-devices" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#adi%3EADIN2111"><span class="xref myst">ADIN2111</span></a></p></li>
</ul>
</section>
<section id="supported-boards">
<h2>Supported Boards<a class="headerlink" href="#supported-boards" title="Link to this heading">#</a></h2>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading">#</a></h2>
<p>The ADIN2111 is a low complexity, 2-Port Ethernet Switch with Integrated 10BASE-T1L PHYs designed for industrial Ethernet applications. It integrates an 2 Ethernet PHY cores with a MAC and all the associated analog circuitry, input and output clock buffering.</p>
<p>Programmable transmit levels, external termination resistors and independent Rx/Tx pins make the ADIN2111 suited to
intrinsic safety applications. The ADIN2111 has an integrated voltage supply monitoring and power on reset circuitry to improve system level robustness.</p>
<p>The device has a 4-wire SPI interface for communication between the MAC and host processor.</p>
</section>
<section id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Link to this heading">#</a></h2>
<section id="status">
<h3>Status<a class="headerlink" href="#status" title="Link to this heading">#</a></h3>
<table>
<tbody>
<tr class="odd">
<td>Source</td>
<td>Mainlined?</td>
</tr>
<tr class="even">
<td><a href="linux.github&gt;master/drivers/net/ethernet/adi/adin1110.c">adin1110.c</a></td>
<td>Yes</td>
</tr>
</tbody>
</table>
</section>
<section id="files">
<h3>Files<a class="headerlink" href="#files" title="Link to this heading">#</a></h3>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>driver</td>
<td><a href="linux.github&gt;master/drivers/net/ethernet/adi">drivers/net/ethernet/adi/adin1110.c</a></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="enabling-linux-driver-support">
<h2>Enabling Linux driver support<a class="headerlink" href="#enabling-linux-driver-support" title="Link to this heading">#</a></h2>
<p>Configure kernel with “make menuconfig” (alternatively use “make xconfig” or
“make qconfig”)</p>
<ol class="arabic simple">
<li><p>Hit the search button (typically the slash “/” key)</p></li>
<li><p>Type ADIN1110, then hit Enter; if nothing shows up, the driver is not available in your kernel tree, please use <a class="reference external" href="https://github.com/analogdevicesinc/linux/">the ADI linux tree</a></p></li>
<li><p>Press 1 (the key), then hit Enter</p></li>
<li><p>You should see the location + dependencies for enabling the driver</p></li>
</ol>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Linux Kernel Configuration
Symbol: ADIN1110 [=y]
Type  : tristate                                                                                                                                                                      
Prompt: Analog Devices ADIN1110 MAC-PHY
   Location:
     -&gt; Device Drivers
       -&gt; Network device support (NETDEVICES [=y])
         -&gt; Ethernet driver support (ETHERNET [=y])
   (1)     -&gt; Analog Devices devices (NET_VENDOR_ADI [=y])
   Defined at drivers/net/ethernet/adi/Kconfig:20
   Depends on: NETDEVICES [=y] &amp;&amp; ETHERNET [=y] &amp;&amp; NET_VENDOR_ADI [=y] &amp;&amp; SPI [=y]
   Selects: CRC8 [=y]
</pre></div>
</div>
</section>
<section id="driver-testing">
<h2>Driver testing<a class="headerlink" href="#driver-testing" title="Link to this heading">#</a></h2>
<p>This requires that another 10BASE-T1L PHY be connected to the other end of the network cable, or that a media converter be used to convert to normal twisted-pair ethernet that standard ethernet cables use.</p>
<p>ADIN2111 communicates with the host via SPI. For 10 Mbps bandwidth, SPI frequency needs to be around 23 MHz. Lower SPI frequencies are supported but will result in a lower bandwidth. At 1 MHz the MAC will provide aprox. 0.4 Mbps of bandwidth.</p>
<p>Connect to host the SCLK, CS_N, SDI, SDO and INT_N. (The INT_N is mandatory, see DT bindings). RX frames and sent TX frames are signaled to the host by INT_N IRQ pin.</p>
<section id="device-tree">
<h3>Device Tree<a class="headerlink" href="#device-tree" title="Link to this heading">#</a></h3>
<p>ADIN2111 probes via devicetree.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethernet@0 {
    compatible = &quot;adi,adin2111&quot;;
    
        /* SPI CS number */
        reg = &lt;0&gt;;

        /* will need 23 MHz for 10 Mbps, lower speeds will result in lower bandwidth */
    spi-max-frequency = &lt;1000000&gt;;

        /* optional, will check all control read/writes over SPI */
    adi,spi-crc;

    #address-cells = &lt;1&gt;;
    #size-cells = &lt;0&gt;;

        /* an IRQ is required, INT_N pin is configured to signal RX/TX frames */
    interrupt-parent = &lt;&amp;gpio&gt;;
    interrupts = &lt;25 2&gt;;

        /* This is the host MAC address, by default ADIN2111 will also accept broadcast frames */
    mac-address = [ CA 2F B7 10 23 63 ];

    phy@0 {
        compatible = &quot;ethernet-phy-id0283.bca1&quot;;
        reg = &lt;0x0&gt;;
    };

    phy@1 {
        compatible = &quot;ethernet-phy-id0283.bca1&quot;;
        reg = &lt;0x1&gt;;
    };
};
</pre></div>
</div>
</section>
<section id="renaming-ethernet-interfaces">
<h3>Renaming ethernet interfaces<a class="headerlink" href="#renaming-ethernet-interfaces" title="Link to this heading">#</a></h3>
<p>After ADIN2111 has probed, without any udev rule, the two interfaces will be probably named eth1 and eth2.
To rename them you need to create a udev rule under:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root@analog:~# cat /etc/udev/rules.d/55-adin2111-net.rules
SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, ATTR{phys_switch_id}==&quot;6164696e323131312d31&quot;, ATTR{phys_port_name}!=&quot;&quot;, NAME=&quot;adin2111-0-$attr{phys_port_name}&quot;
</pre></div>
</div>
<note important>
You need to change the phys_switch_id to match your own system.
This can be found under:
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root@analog:~# cat /sys/class/net/eth1/phys_switch_id
6164696e323131312d31
</pre></div>
</div>
</note>
</section>
<section id="bridging-the-two-ports">
<h3>Bridging the two ports<a class="headerlink" href="#bridging-the-two-ports" title="Link to this heading">#</a></h3>
<p>Linux driver will allocated and register two port netdevs. In this way each port is exposed to the userspace. Sometimes the user may not care on which port he wants to talk to another host on the same subnet, for this the two ports can be bridged:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ip link set adin2111-0-p0 up
ip link set adin2111-0-p1 up
ip link add br0 type bridge
ip link set adin2111-0-p0 master br0
ip link set adin2111-0-p1 master br0
ip addr add 192.168.160.160/24 dev br0
ip link set br0 up
ip route add 192.168.160.0/24 dev br0
</pre></div>
</div>
<p><note important>Default behavior of ADIN2111 will be to forward to the host only frames with the destination MAC address of the interface and broadcast address (Multicast only if enabled). Other frames are not seen by the SPI host and will be forwarded to the other port.</note></p>
<section id="printing-the-forwarding-database">
<h4>Printing the forwarding database<a class="headerlink" href="#printing-the-forwarding-database" title="Link to this heading">#</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root@analog:~# bridge fdb
ca:2f:b7:10:23:63 dev adin2111-0-p0 master br0 permanent
33:33:00:00:00:01 dev adin2111-0-p0 self permanent
01:00:5e:00:00:01 dev adin2111-0-p0 self permanent
33:33:ff:10:23:63 dev adin2111-0-p0 self permanent
33:33:00:00:00:fb dev adin2111-0-p0 self permanent
33:33:00:00:00:01 dev adin2111-0-p1 self permanent
01:00:5e:00:00:01 dev adin2111-0-p1 self permanent
33:33:ff:10:23:63 dev adin2111-0-p1 self permanent
33:33:00:00:00:fb dev adin2111-0-p1 self permanent
</pre></div>
</div>
</section>
</section>
<section id="ifconfig">
<h3>ifconfig<a class="headerlink" href="#ifconfig" title="Link to this heading">#</a></h3>
<p>This tool will display the general status of the available network interfaces. If they’ve obtained an IP address, RX packets/errors/dropped/etc, TX packets/errors/dropped/etc, MAC address, etc.</p>
<p>Typically, if both TX &amp; RX values are incremented, it means that it is working. Also note that there are error counters; if only the TX/RX counters increment, something may be wrong with the network connection.
Check error/dropped counters too.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root@analog:~# ifconfig
adin2111-0-p0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        inet6 fe80::c82f:b7ff:fe10:2363  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether ca:2f:b7:10:23:63  txqueuelen 1000  (Ethernet)
        RX packets 13995  bytes 12616746 (12.0 MiB)
        RX errors 2  dropped 270  overruns 0  frame 0
        TX packets 15916  bytes 17297421 (16.4 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 199  

adin2111-0-p1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet6 fe80::c82f:b7ff:fe10:2363  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether ca:2f:b7:10:23:63  txqueuelen 1000  (Ethernet)
        RX packets 106283  bytes 97498793 (92.9 MiB)
        RX errors 4  dropped 1835  overruns 0  frame 0
        TX packets 119263  bytes 128953328 (122.9 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 199  
</pre></div>
</div>
</section>
<section id="ethtool">
<h3>ethtool<a class="headerlink" href="#ethtool" title="Link to this heading">#</a></h3>
<p>This tool queries the MAC &amp; PHY via the MAC driver. The MAC driver also allows access to the PHY registers.
ethtool can be used to show &amp; override link settings and other parameters for the MAC &amp; PHY.</p>
<p>Links for the tool:</p>
<ul class="simple">
<li><p>Official page with source code: <a class="reference external" href="https://mirrors.edge.kernel.org/pub/software/network/ethtool/">https://mirrors.edge.kernel.org/pub/software/network/ethtool/</a></p></li>
<li><p>Manual page: <a class="reference external" href="http://man7.org/linux/man-pages/man8/ethtool.8.html">http://man7.org/linux/man-pages/man8/ethtool.8.html</a></p></li>
</ul>
<p><note tip>Some features of ethtool described here are available in newer versions of ethtool. If some of them don’t work, consider upgrading or getting a newer version</note></p>
<section id="example-seeing-mac-phy-info">
<h4>Example: Seeing MAC &amp; PHY info<a class="headerlink" href="#example-seeing-mac-phy-info" title="Link to this heading">#</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root@analog:~# ethtool adin2111-0-p0
Settings for adin2111-0-p0:
    Supported ports: [ TP    MII ]
    Supported link modes:   10baseT/Full
    Supported pause frame use: Symmetric Receive-only
    Supports auto-negotiation: Yes
    Supported FEC modes: Not reported
    Advertised link modes:  10baseT/Full
    Advertised pause frame use: No
    Advertised auto-negotiation: Yes
    Advertised FEC modes: Not reported
    Speed: Unknown!
    Duplex: Unknown! (255)
    Auto-negotiation: on
    Port: Twisted Pair
    PHYAD: 1
    Transceiver: external
    MDI-X: Unknown
    Link detected: no

Settings for adin2111-0-p1:
    Supported ports: [ TP    MII ]
    Supported link modes:   10baseT/Full
    Supported pause frame use: Symmetric Receive-only
    Supports auto-negotiation: Yes
    Supported FEC modes: Not reported
    Advertised link modes:  10baseT/Full
    Advertised pause frame use: No
    Advertised auto-negotiation: Yes
    Advertised FEC modes: Not reported
    Link partner advertised link modes:  10baseT/Full
    Link partner advertised pause frame use: No
    Link partner advertised auto-negotiation: Yes
    Link partner advertised FEC modes: Not reported
    Speed: 10Mb/s
    Duplex: Full
    Auto-negotiation: on
    Port: Twisted Pair
    PHYAD: 2
    Transceiver: external
    MDI-X: Unknown
    Link detected: yes
</pre></div>
</div>
</section>
<section id="example-changing-link-autonegotiation">
<h4>Example: changing link autonegotiation<a class="headerlink" href="#example-changing-link-autonegotiation" title="Link to this heading">#</a></h4>
<p>Since the PHY can only do 10 Mbps full-duplex, the only operation possible here is to disable auto-negotiation and set preferred/forced master/slave</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -s adin2111-0-p0 speed 10 duplex full master-slave forced-master
ethtool -s adin2111-0-p0 speed 10 duplex full master-slave forced-slave
ethtool -s adin2111-0-p0 autoneg on
ethtool -s adin2111-0-p0 autoneg on master-slave preferred-master
ethtool -s adin2111-0-p0 autoneg on master-slave preferred-slave
ethtool -s adin2111-0-p0 autoneg on master-slave forced-master
ethtool -s adin2111-0-p0 autoneg on master-slave forced-slave
</pre></div>
</div>
</section>
<section id="example-checking-phy-statistics">
<h4>Example: checking PHY statistics<a class="headerlink" href="#example-checking-phy-statistics" title="Link to this heading">#</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root@analog:~# ethtool --phy-statistics adin2111-0-p0
PHY statistics:
     total_frames_error_count: 0
     total_frames_count: 13994
     length_error_frames_count: 0
     alignment_error_frames_count: 0
     symbol_error_count: 1
     oversized_frames_count: 1
     undersized_frames_count: 0
     odd_nibble_frames_count: 1
     odd_preamble_packet_count: 0
     false_carrier_events_count: 1

root@analog:~# ethtool --phy-statistics adin2111-0-p1
PHY statistics:
     total_frames_error_count: 0
     total_frames_count: 106261
     length_error_frames_count: 0
     alignment_error_frames_count: 0
     symbol_error_count: 0
     oversized_frames_count: 0
     undersized_frames_count: 0
     odd_nibble_frames_count: 0
     odd_preamble_packet_count: 0
     false_carrier_events_count: 0
</pre></div>
</div>
</section>
</section>
<section id="throughput-testing-iperf">
<h3>Throughput testing - iperf<a class="headerlink" href="#throughput-testing-iperf" title="Link to this heading">#</a></h3>
<p>This is a more system-general test but it also validates the PHY.</p>
<note tip>
More tools are available for this sort of testing (iperf3, netperf, etc), but iperf is one of the more basic/simple ones to do this validation. If this one achieves expected results, others should too</note>
<p>On one of the endpoints with the ADIN1100, run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>iperf -s
</pre></div>
</div>
<p>and on another system</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>iperf -c &lt;ip-addr-of-the-other-system&gt;
</pre></div>
</div>
<p>Then reverse the commands on the hosts. iperf only works in one direction.</p>
</section>
<section id="data-integrity-testing">
<h3>Data integrity testing<a class="headerlink" href="#data-integrity-testing" title="Link to this heading">#</a></h3>
<p>One one side, generate a file with random data (say 1GB)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dd if=/dev/urandom of=test.data bs=1M count=1000

sha256sum test.data
&lt;SHA256-hash-of-data&gt;
</pre></div>
</div>
<p>Then transfer the data to the other side with scp,ftp,etc:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>scp test.data root@&lt;ip-addr-of-the-other-host&gt;
</pre></div>
</div>
<p>On the other host check the hash</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sha256sum test.data
&lt;SHA256-hash-of-data&gt; == should be identical with the first hash
</pre></div>
</div>
</section>
</section>
<section id="ethernet-pointers">
<h2>Ethernet pointers<a class="headerlink" href="#ethernet-pointers" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>netdev mailing list: <a class="reference external" href="mailto:netdev&#37;&#52;&#48;vger&#46;kernel&#46;org">netdev<span>&#64;</span>vger<span>&#46;</span>kernel<span>&#46;</span>org</a></p></li>
<li><p><a class="reference external" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/devicetree/bindings/net/ethernet-controller.yaml">Ethernet Controller bindings doc</a></p></li>
<li><p><a class="reference external" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/devicetree/bindings/net/ethernet-phy.yaml">Ethernet PHY bindings doc</a></p></li>
</ul>
<p>![](page&gt;resources/tools-software/linux-drivers/need_help#need help&amp;noheader&amp;firstseconly&amp;noeditbtn)</p>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="adin1110.html" title="Previous document" class="prev">ADIN1110 10BASE-T1L MAC-PHY Linux Driver</a>
    <a href="open_alliance.html" title="Next document" class="next">Open Alliance TC6-10BASE-T1x MAC-PHY Serial Interface</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>

  
  <form action="" method="get" class="search-area">
    <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
    <button value="search"></button>
    <span id="search-progress"></span>
  </form>
  
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>